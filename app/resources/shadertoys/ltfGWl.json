{"Shader":{"ver":"0.1","info":{"id":"ltfGWl","date":"1426072805","viewed":740,"name":"Ordered dither","username":"klk","description":"ordered dither with gamma","likes":3,"published":3,"flags":0,"tags":["dithergamma"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/#version 140\n\nprecision highp float;\n\n#define float3 vec3\n#define float2 vec2\n#define float4 vec4\n#define float3x3 mat3\n\nfloat dp(float i)\n{ \n    i=floor(i);\n    return i*2.0-floor(i\/2.0)-floor(i\/3.0)*4.0;\n}\n\nfloat amod(float x, float m)\n{\n    return fract(x\/m)*m;\n}\n\n\nfloat dith(float2 xy)\n{\n    float x=floor(xy.x);\n    float y=floor(xy.y);\n    float v=0.0;\n    float sz=8.0;\n    float mul=1.0;\n    for(int i=0;i<4;i++)\n    {\n    \t\tv+=dp(\n                amod(amod(x\/sz,2.0)+2.0*amod(y\/sz,2.0),4.0)\n            )*mul;\n        sz\/=2.0;\n        mul*=4.0;\n    }\n\treturn float(v)\/float(mul-1.0);\n}\n\n\n#define float3 vec3\n#define float2 vec2\n#define float4 vec4\n\nint Glyph(int d)\n{\n    \/* *\/if(d== 0)return 0x07+0x05*16+0x05*256+0x05*4096+0x07*65536;\n    else if(d== 1)return 0x07+0x02*16+0x02*256+0x02*4096+0x06*65536;\n    else if(d== 2)return 0x07+0x04*16+0x07*256+0x01*4096+0x07*65536;\n    else if(d== 3)return 0x07+0x01*16+0x07*256+0x01*4096+0x07*65536;\n    else if(d== 4)return 0x01+0x01*16+0x07*256+0x05*4096+0x05*65536;\n    else if(d== 5)return 0x07+0x01*16+0x07*256+0x04*4096+0x07*65536;\n    else if(d== 6)return 0x07+0x05*16+0x07*256+0x04*4096+0x07*65536;\n    else if(d== 7)return 0x01+0x01*16+0x01*256+0x01*4096+0x07*65536;\n    else if(d== 8)return 0x07+0x05*16+0x07*256+0x05*4096+0x07*65536;\n    else if(d== 9)return 0x07+0x01*16+0x07*256+0x05*4096+0x07*65536;\n    else if(d==10)return 0x00+0x00*16+0x00*256+0x00*4096+0x02*65536;\n    else return 0;\n }\n\nfloat d0(int d, int x, int y)\n{\n    int D=Glyph(d);\n    int l=0;\n    \n    l=int(mod(float(D\/int(exp2(float(y*4)))),16.0));\n\n    l=int(float(l\/int(exp2(float(4-x)))));\n   \n\treturn fract(float(l)\/2.0);          \n}\n\nfloat print(float v, float2 pos, float2 frag)\n{\n    frag=pos-frag;\n    int digit=int(frag.x)\/8;\n    int digity=int(frag.y)\/12;\n    int pow10=int(pow(10.0,float(digit)-1.0));\n    int dig=int(mod(v\/float(pow10),10.0));\n\/\/    if(pow10>int(pos.x)) dig=-1;\n    \n    float d=0.0;\n    if((digit>0)&&(digit<6)&&(digity==1))\n        d=d0(dig,4-int(mod(frag.x\/2.0,4.0)),5-int(mod(frag.y\/2.0,6.0)));\n    return d*2.0;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = (fragCoord.xy)\/iResolution.xy;\n    \n    vec2 dc=fragCoord.xy;\n    \n    \n    float v=dith(dc);\n    float gamma=iMouse.y\/iResolution.y*4.0;\n    float d=print(gamma*1000.0,float2(60.0,60.0),fragCoord.xy);\n    \n\tif(fragCoord.x<iResolution.x\/2.0)\n    \tfragColor = vec4(uv.y,d,d,1.0);\n    else\n    \tfragColor = vec4((pow(uv.y, gamma)+(v-0.5))>0.5, 0, 0, 1.0);\n\t\n\n}","name":"","description":"","type":"image"}]}}