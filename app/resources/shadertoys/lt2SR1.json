{"Shader":{"ver":"0.1","info":{"id":"lt2SR1","date":"1441749822","viewed":1017,"name":"Fake sky","username":"XT95","description":"Just try to make a \"good\" fake sky<br\/>If you have any suggestion to get it better ..!","likes":12,"published":3,"flags":0,"tags":["fake","sky","checker","scattering"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ Created by anatole duprat - XT95\/2015\n\/\/ License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n\n\/\/Just try to make a sky similar to http:\/\/www.scratchapixel.com\/old\/assets\/Uploads\/Atmospheric%20Scattering\/as-aerial2.png in few lines\n\/\/Real sky here : http:\/\/www.scratchapixel.com\/old\/lessons\/3d-advanced-lessons\/simulating-the-colors-of-the-sky\/atmospheric-scattering\/\n\n\n\nvec3 skyColor( in vec3 rd )\n{\n    vec3 sundir = normalize( vec3(.0, .1, 1.) );\n    \n    float yd = min(rd.y, 0.);\n    rd.y = max(rd.y, 0.);\n    \n    vec3 col = vec3(0.);\n    \n    col += vec3(.4, .4 - exp( -rd.y*20. )*.3, .0) * exp(-rd.y*9.); \/\/ Red \/ Green \n    col += vec3(.3, .5, .6) * (1. - exp(-rd.y*8.) ) * exp(-rd.y*.9) ; \/\/ Blue\n    \n    col = mix(col*1.2, vec3(.3),  1.-exp(yd*100.)); \/\/ Fog\n    \n    col += vec3(1.0, .8, .55) * pow( max(dot(rd,sundir),0.), 15. ) * .6; \/\/ Sun\n    col += pow(max(dot(rd, sundir),0.), 150.0) *.15;\n    \n    return col;\n}\n\n\nfloat checker( vec2 p )\n{\n    p = mod(floor(p),2.0);\n    return mod(p.x + p.y, 2.0) < 1.0 ? .25 : 0.1;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \/\/screen coords\n\tvec2 q = fragCoord.xy\/iResolution.xy;\n\tvec2 v = -1.0+2.0*q;\n\tv.x *= iResolution.x\/iResolution.y;\n\t\n\t\/\/camera ray\n\tvec3 dir = normalize( vec3(v.x, v.y+.5, 1.5) );\n\t\n    \/\/Scene\n    vec3 col = vec3( checker(dir.xz\/dir.y*.5+vec2(0.,-iGlobalTime*2.)) ) + skyColor(reflect(dir,vec3(0.,1.,0.)))*.3;\n    col = mix(col, skyColor(dir), exp(-max(-v.y*9.-4.8,0.)) );\n\n    \/\/Vignetting\n\tcol *= .7 + .3*pow(q.x*q.y*(1.-q.x)*(1.-q.y)*16., .1);\n        \n\tfragColor = vec4( col, 1.);\n}","name":"","description":"","type":"image"}]}}