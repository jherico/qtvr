{"Shader":{"ver":"0.1","info":{"id":"MljXWG","date":"1446306075","viewed":310,"name":"Birth of a star","username":"chrisaverage","description":"Inspired by real events.","likes":8,"published":3,"flags":0,"tags":["star","space"],"hasliked":0},"renderpass":[{"inputs":[{"id":3,"src":"\/presets\/tex02.jpg","ctype":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"}},{"id":4,"src":"\/presets\/tex03.jpg","ctype":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}},{"id":10,"src":"\/presets\/tex09.jpg","ctype":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"\n\nvec2 uniformCoord(vec2 uv)\n{\n    return vec2(uv - iResolution.xy \/ 2.0)  \/ (iResolution.yy \/ 2.0);\n}\n\nvec2 rotate(vec2 uv, float angle)\n{\n    float s = sin(angle);\n    float c = cos(angle);\n    return uv * mat2(c, s, -s, c);\n}\n\nvec2 pp(vec2 uv)\n{\n    float y = uv.y * 0.5 + 0.5;\n    float ny = 1.5 * y;\n    return vec2(uv.x \/ 1.4 * (1.0 - ny \/ 3.0), ny * 2.0 - 1.5);\n}\n\nfloat spiral(vec2 uv)\n{\n    float dist = 1.0 - length(uv);\n    float d = dist * 0.6 * texture2D(iChannel0, rotate(uv * 2.5, iGlobalTime * 0.1 + dist * 3.0)).x\n            + dist * 0.5 * texture2D(iChannel0, rotate(uv * 2.5, iGlobalTime * 0.15 + dist * 3.0)).x;\n    \n    for(int i=0; i < 10; ++i)\n    {\n        vec2 coord = uv * (1.0 - fract(iGlobalTime * -0.02 + float(i) * 0.089));\n        coord = rotate(coord, iGlobalTime * 0.01 + dist * float(i) * 0.2);\n        vec2 tx = texture2D(iChannel0, coord).xy;\n        d += tx.x \/ 30.0;\n        d -= tx.y \/ 70.0;\n    }\n    return d;\n}\n\nvec3 star(vec2 uv)\n{\n    const float aspect = 6.5;\n    const float radius = 1.0\/aspect;\n    vec3 c = vec3(0.0);\n    float dist = distance(uv, vec2(0,0));\n    \n    uv = uv * aspect;\n    float r = dot(uv,uv);\n    float f = (1.0-sqrt(abs(1.0-r)))\/(r);\n    if( dist < radius ){\n  \t   vec2 newUv      = vec2(uv.x * f, (uv.y - 0.8) * f);\t\t\n\t   float wobble    = texture2D( iChannel1, newUv ).r * 0.3;\n\t   float uOff      = ( wobble - iGlobalTime * 0.2);\n\t   vec2 starUV\t   = newUv + vec2( uOff, 0.0 );\n\t   vec3 starSphere = texture2D( iChannel1, starUV ).rgb;\n       c = starSphere;\n       c = vec3(c.r + 1., c.g + 1., c.b + 1.1);\n       c *= (1.0 - dist * aspect);\n    }\n    \n    c = c * (uv.y * 2.0 + 0.3);\n    return clamp(c, -0.03, 1.0);\n}\n\nvec3 gas(vec2 uv, float distort)\n{\n    const vec3 grading1\t= vec3( 0.15, 0.7, 1.8 );\n    const vec3 grading2\t= vec3( 1.0, 0.55, 0.0 );\n    const vec3 grading3\t= vec3( 2.5, 1.0, 0.5 );\n    \n    float dist = (1.0 - length(uv * vec2(0.6, 1.4))) * 0.04;\n    vec2 wobble = texture2D(iChannel1, rotate(uv, iGlobalTime * 0.1)).rg * dist;\n    \n    vec3 c = vec3(spiral(pp(uv * 0.9 + wobble + distort * 0.5)));\n    vec3 cColor = vec3(c + ((c - 0.5) * grading1) + (c * grading2) + ((atan(c) * 0.3 + 1.1) * grading3 *0.1));\n    return cColor;\n}\n\n\nvec3 parts(vec2 uv)\n{\n    vec3 fi = texture2D(iChannel1, rotate(pp(uv), iGlobalTime * 0.06)).rgb;\n    vec2 uv1 = pp((uv + fi.rg * 4.1) * 0.8) * 0.5;\n    vec2 uv2 = pp((uv ) * 1.8) * 0.9;\n\tfloat dist = 1.0 - length(uv * vec2(0.1, 0.2));\n    float d = dist * 0.63 * texture2D(iChannel2, rotate(uv1.yy, iGlobalTime * 0.01 + dist * 1.0)).x\n            + dist * 0.5 * texture2D(iChannel2, rotate(uv1, iGlobalTime * 0.12 + dist * 1.2)).x\n            + dist * 0.33 * texture2D(iChannel2, rotate(uv2.xx, iGlobalTime * 0.014 + dist * 1.4)).x\n            + dist * 0.7 * texture2D(iChannel2, rotate(uv2, iGlobalTime * 0.16 + dist * 1.6)).x;    \n    vec3 c = vec3(pow(d, 8.0) *  0.2) * fi;\n    return c;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = uniformCoord(fragCoord);\n    \n    vec3 c1 = parts(uv);\n    vec3 c2 = gas(uv, c1.r);\n    vec3 c3 = star(uv);\n       \n \n    fragColor.rgb = c1 + c2 + c3;\n    fragColor.a   = 1.0;\n}","name":"","description":"","type":"image"}]}}