{"Shader":{"ver":"0.1","info":{"id":"Mdc3zH","date":"1448055020","viewed":392,"name":"one cube - variant (307)","username":"FabriceNeyret2","description":"a variant of https:\/\/www.shadertoy.com\/view\/Xs33RH","likes":7,"published":3,"flags":0,"tags":["cube","short","codegolf"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ a variant of https:\/\/www.shadertoy.com\/view\/Xs33RH\n\n\n\/\/ reduction: 307\n                                                 \/\/ draw segment [a,b]\n#define D(m)  3e-3\/length( m.x*v - u+a )\n#define L   ; m.x= dot(u-a,v=b-a)\/dot(v,v); o.z += D(m); o += D(clamp(m,0.,1.));\n#define P     b=c= vec2(r.x,1)\/(4.+r.y) L   b=a*I L   a=c*I L   a=c; r= I*r.yx;\n\nvoid mainImage(out vec4 o, vec2 U)\n{   vec2 v,m, I=vec2(1,-1), a,b,c=iResolution.xy, \n        u = (U+U-c)\/c.y,\n        r = sin(iDate.w-.8*I); r += I*r.yx;\n    P  o-=o;       \/\/ just to initialize a\n\tP P P P        \/\/ 4*3 segments\n\n}\n\n\n\n\n\n\/* \/\/ 388\n                                                  \/\/ draw segment [a,b]\n\/\/ #define L(a,b)  o+=3e-3\/length( clamp( dot(u-a,v=b-a)\/dot(v,v), 0.,1. ) *v - u+a );\n#define D(m,a)  3e-3\/length( m*v - u+a )\n#define L(a,b)  m=dot(u-a,v=b-a)\/dot(v,v); o.z += D(m,a); o += D(clamp(m,0.,1.),a);\n\n#define Z(x,y)  vec2( x,1 ) \/ ( 4.+y )           \/\/ perspective transform\n#define P(A,B)  L(A,B)  L(A*I,B*I)  L(A,A*I)     \/\/ draw 1 top segment + 1 bottom + 1 vertical\n\nvoid mainImage( out vec4 o, in vec2 u )\n{\n    o-=o;\n    u = 2.*u\/iResolution.y - vec2(1.8,1); \n    \n    float m=iGlobalTime, l=sin(m); m=cos(m)-l; l+=m+l;\n    vec2  v, I=vec2(1,-1), \n          a=Z(l,m), b=Z(m,-l), c=Z(-l,-m), d=Z(-m,l); \/\/ 4 top vertices screen coords\n\n          P(a,b) P(b,c) P(c,d) P(d,a)                 \/\/ draw 4*3 segments\n}\n\/**\/","name":"","description":"","type":"image"}]}}