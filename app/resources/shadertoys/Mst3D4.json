{"Shader":{"ver":"0.1","info":{"id":"Mst3D4","date":"1449780056","viewed":240,"name":"hexagonal truchet on GridClick","username":"aiekick","description":"based on <a href=\"https:\/\/www.shadertoy.com\/view\/Xdt3D8\"  class=\"regular\" target=\"_blank\">hexagonal truchet (408)<\/a>  from shane<br\/>Click on cell for fullscreen","likes":6,"published":3,"flags":0,"tags":["mouse","grid","click","shane"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ Created by Stephane Cuillerdier - Aiekick\/2015\n\/\/ License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\/\/ Tuned via XShade (http:\/\/www.funparadigm.com\/xshade\/)\n\n\/*\nbased on hexagonal truchet (408)  from shane : https:\/\/www.shadertoy.com\/view\/Xdt3D8\n*\/\n\nvec2 gridSize = vec2(3.,3.);\/\/grid size (columns, rows)\n    \nvec2 s,g,h,m;\nfloat z,t;\n\nfloat EncID(vec2 s, vec2 h, vec2 sz) \/\/ encode id from coord \/\/ s:screenSize \/ h:pixelCoord \/ sz=gridSize\n{\n    float cx = floor(h.x\/(s.x\/sz.x));\n    float cy = floor(h.y\/(s.y\/sz.y));\n    return cy*sz.x+cx;\n}\nvec2 DecID(float id, vec2 sz) \/\/ decode id to coord \/\/ id:cellId \/ sz=gridSize\n{\n    float cx = mod(float(id), sz.x);\n    float cy = (float(id)-cx)\/sz.x;\n    return vec2(cx,cy);\n}\nvec3 getcell(vec2 s, vec2 h, vec2 sz) \/\/ return id \/ uv\n{\n    float cx = floor(h.x\/(s.x\/sz.x));\n    float cy = floor(h.y\/(s.y\/sz.y));\n    \n    float id = cy*sz.x+cx;\n    \n    return vec3(id, h);\n}\n\nfloat shade(vec2 uv, float z, float pat, float den, float t)\n{\n\tuv \/= z;\n\tuv.xy += t;\n    uv.x *= sign(cos(length(ceil(uv))*pat));\n    return cos(min(length(uv = fract(uv)), length(--uv))*3.14159*2.*floor(den)); \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tz = 3.;\n    t = iGlobalTime * 0.01;\n    s = iResolution.xy;\n    h = gl_FragCoord.xy;\n    g = h;\n    m = iMouse.xy;\n\t\n\tvec4 d = vec4(0);\n    vec3 cell = getcell(s,h,gridSize);\n\tif(iMouse.z>0.) {cell.x = EncID(s,m,gridSize);cell.yz = g;}\n\t\t\n\tvec2 p = cell.yz;\n\t\t\n\tif (cell.x == 0.) d += shade(cell.yz, 168., 111., 84., t); \/\/ ok\n\tif (cell.x == 1.) d += shade(cell.yz, 168., 111., 126., t*50.); \/\/ ok\n\tif (cell.x == 2.) d += shade(cell.yz, 84., 111., 84., t); \/\/ ok\n\tif (cell.x == 3.) d += shade(cell.yz, 84., 168., 40., t*200.); \/\/ ok\n\tif (cell.x == 4.) d += shade(cell.yz, 93., 123., 128., t*30.); \/\/ ok\n\tif (cell.x == 5.) d += shade(cell.yz, 57., 150., 128., t); \/\/ ok\n\tif (cell.x == 6.) d += shade(cell.yz, 87., 81., 124., t*100.); \/\/ ok\n\tif (cell.x == 7.) d += shade(cell.yz, 87., 81., 172., t*100.);\/\/ok\n\tif (cell.x == 8.) d += shade(cell.yz, 66., 201., 46., t*50.);\/\/ok\n\n\tfragColor = d;\n}\n","name":"","description":"","type":"image"}]}}