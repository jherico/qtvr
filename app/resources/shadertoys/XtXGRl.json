{"Shader":{"ver":"0.1","info":{"id":"XtXGRl","date":"1424107131","viewed":521,"name":"triangle altitudes","username":"Doublefresh","description":"the altitudes (and orthocenter) of a triangle, using cross product in homogenous coordinates.","likes":1,"published":3,"flags":0,"tags":["2d","3","points"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"float plane2(vec3 l, vec2 p)\n{\n    l \/= length(l.xy); \/\/ normalize line\n    return smoothstep(0.010, 0.0, abs(dot(l, vec3(p, 1.0))));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy \/ iResolution.xy;\n    vec3 col = vec3(0.0);\n    \n    vec2 p = 2.0 * uv - 1.0;\n    p.x *= iResolution.x \/ iResolution.y;\n    \n    \/\/ triangle verts\n    vec3 p0 = vec3(-0.1, 0.02, 1.0);\n    vec3 p1 = vec3(0.6, 0.0, 1.0);\n    vec3 p2 = vec3(0.25 + 0.1*sin(iGlobalTime), 0.1*cos(iGlobalTime) + 0.5, 1.0);\n    \n    \/\/ draw triangle planes\n    col = mix(col, vec3(1.0), plane2(cross(p0, p1), p));\n    col = mix(col, vec3(1.0), plane2(cross(p1, p2), p));\n    col = mix(col, vec3(1.0), plane2(cross(p2, p0), p));\n    \n    \/\/ (p0 x p1) x p2 and it's cyclic permutations are the altitude lines\n    vec3 c012 = cross(cross(p0, p1), p2);\n    vec3 c201 = cross(cross(p2, p0), p1);\n    vec3 c120 = cross(cross(p1, p2), p0);\n    \n    col = mix(col, vec3(1.0, 0.5, 0.3), plane2(c012, p)  );\n    col = mix(col, vec3(0.3, 1.0, 0.5), plane2(c201, p)  );\n    col = mix(col, vec3(0.5, 0.3, 1.0), plane2(c120, p)  );\n\tfragColor = vec4(col, 1.0);\n}","name":"","description":"","type":"image"}]}}