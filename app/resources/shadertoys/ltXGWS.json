{"Shader":{"ver":"0.1","info":{"id":"ltXGWS","date":"1424688972","viewed":825,"name":"Honeycomb Pattern","username":"TekF","description":"After reading Wikipedia pages about tessellation, I wanted to see what it looked like to use a regular honeycomb of rhombic dodecahedra as a texture. I'm quite pleased with the result, will definitely be using it. ","likes":7,"published":3,"flags":0,"tags":["honeycomb"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ Ben Quantock 2015\n\/\/ License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n\/\/#define DISPLACE\n\nfloat cells( vec3 p )\n{\n    \/\/ find distance to closest \"white checker\" in checkerboard pattern\n    p = fract(p\/2.0)*2.0;\n    \n    p = min( p, 2.0-p );\n    \n    return min(length(p),length(p-1.0));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \/\/ make a shape to place the material on\n    \/\/ so we can test lighting, volumetric mapping, etc\n\tvec2 iHalfRes = iResolution.xy\/2.0;\n    vec3 ray = normalize(vec3(fragCoord.xy-iHalfRes,iHalfRes.y*2.0));\n    \n    vec2 r = vec2(0);\n    if ( iMouse.z > .0 ) r += vec2(-2,3)*(iMouse.yx\/iHalfRes.yx-1.0);\n    else r.y = iGlobalTime*.3;\n    \n    vec2 c = cos(r);\n    vec2 s = sin(r);\n    \n    ray.yz = ray.yz*c.x + vec2(-1,1)*ray.zy*s.x;\n    ray.xz = ray.xz*c.y + vec2(1,-1)*ray.zx*s.y;\n\n    vec3 pos = vec3(-c.x*s.y,s.x,-c.x*c.y)*4.0;\n    \n    float h;\n    for ( int i=0; i < 100; i++ )\n    {\n        h = length(pos)-2.0;\n        h = max(h,min( 1.5-length(pos.xy), (length(pos.xz)-abs(pos.y)+.4)*.7 ));\n        \n        #ifdef DISPLACE\n        \th = max( h, (h+(cells(pos*5.0)-.8))*.2 );\n        #endif\n        \n        pos += ray*h;\n        if ( h < .0001 )\n            break;\n    }\n    \n   \tfragColor = vec4(.1,.1,.1,1);\n    if ( h < .1 )\n    {\n        \/\/fragColor.rgb = step(.5,fract(pos*5.0\/2.0-.25));\/\/\n    \tfragColor.rgb = vec3(cells(pos*5.0)\/1.3);\n    }\n}","name":"","description":"","type":"image"}]}}