{"Shader":{"ver":"0.1","info":{"id":"XdlXWX","date":"1407408546","viewed":1010,"name":"Shepard scale","username":"FabriceNeyret2","description":"tune going up forever ","likes":12,"published":3,"flags":8,"tags":["sound","illusion"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"float message(vec2 uv) { \/\/ to alter in the icon\n    uv-=vec2(1.,16.); if ((uv.x<0.)||(uv.x>=32.)||(uv.y<0.)||(uv.y>=3.)) return -1.; \n    int i=1, bit=int(pow(2.,floor(32.-uv.x)));\n    if (int(uv.y)==2) i=  928473456\/bit; \/\/ 00110111 01010111 01100001 01110000\n    if (int(uv.y)==1) i=  626348112\/bit; \/\/ 00100101 01010101 01010000 01010000\n    if (int(uv.y)==0) i= 1735745872\/bit; \/\/ 01100111 01110101 01100001 01010000\n \treturn float(i-2*(i\/2));\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    if (iResolution.y<200.) {float c=message(fragCoord.xy\/8.);if(c>=0.){fragColor=vec4(c);return;}}\n\n    vec2 uv = fragCoord.xy \/ iResolution.xy;\n    \n    float e = (1.-cos(6.283*uv.x))\/2.;\n    float phase = 80.*uv.x-3.*iGlobalTime;\n    float v = pow((sin(phase)+1.)\/2.,30.); \t\t\t\t\t\/\/ peaks\n    v *= step(.45,uv.y*2.)*smoothstep(e,e-.05,-.5+uv.y*2.); \/\/ enveloppe\n    \n\tfragColor = vec4(v);\n}","name":"","description":"","type":"image"},{"inputs":[],"outputs":[{"channel":"0"}],"code":"#define T 8.   \/\/ cycling time\n#define N 56   \/\/ number of peaks\n#define O 1.25 \/\/ octaves\n\nvec2 mainSound(float time)\n{\n    float v = 0.;\n    for (int i=0; i<=N; i++) {\n        float enveloppe = (1.-cos(2.*3.1415927*float(i)\/float(N)))\/2.;\n        \/\/float freq = pow(O,fract(time\/T));\n        \/\/ phase = int of freq\n        float phase =floor(time\/T) + pow(O,fract(time\/T))-1.;\n        phase = phase * pow(O,float(i))*T\/log(O) + float(i);\n        v += enveloppe*sin(2.*3.1415927*phase);\n    }\n    \n    return vec2( v\/float(N) );\n}\n","name":"","description":"","type":"sound"}]}}