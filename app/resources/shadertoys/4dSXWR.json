{"Shader":{"ver":"0.1","info":{"id":"4dSXWR","date":"1410615723","viewed":890,"name":"canvas2","username":"FabriceNeyret2","description":"tune with mouse x and y.  <br\/>Space to show tiles.","likes":18,"published":3,"flags":16,"tags":["canvas","short"],"hasliked":0},"renderpass":[{"inputs":[{"id":33,"src":"\/presets\/tex00.jpg","ctype":"keyboard","channel":3,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"float t = iGlobalTime;\nbool keyToggle(int ascii) {\n\treturn texture2D(iChannel3,vec2((.5+float(ascii))\/256.,.75)).x > 0.;\n}\n\nvoid mainImage( out vec4 fragColor, vec2 fragCoord )\n{\n    vec2 uv0 = fragCoord \/ iResolution.y;\n    vec2 m = iMouse.xy\/iResolution.xy;\n    if (iMouse.z<=0.) { \/\/ autodemo \n\t\t    uv0 += vec2( 1.8*cos(.15*t)+.5*sin(.4*t) , sin(.22*t)-.5*cos(.3*t) );\n\t\t\tm = .5+.5*vec2(cos(t),sin(.6*t)); m.y*=m.x;\n    }\n\n    vec2 uv = uv0*8., iuv=floor(uv);\n    float d = mod(iuv.x+iuv.y,2.), s = mod(iuv.y,2.);\n    uv = fract (uv); if (d==1.) uv.x = 1.-uv.x; \/\/ checkered tile coordinates\n    uv = uv + vec2(-uv.y,uv.x); \/\/ rotate 45deg\n \n    float q = sign(s-.5)*sign(d-.5),\n      size0 = m.x+m.y*cos(.5*3.1415927*uv.y) *q,\n          l = abs(uv.x)-size0,\n          v = smoothstep(0.,.1,abs(l)),\n         v0 = step(0.,l);\n    \n    float size = m.x+m.y*cos(.5*3.1415927*uv.x), \n           ofs = (1.-size)*q; \/\/ corner distance\n             l = (uv.y-1.)-ofs;\n    float   v1 = step(0.,l),\n            d0 =  mod(s+v1,2.),\n            d1 =  mod(s+d+v1,2.); \/\/ corner area\n    v0 = d1<1. ? v0 : 0.; \/\/ background\n    v = (d1<1. ? v : 1.)*smoothstep(0.,.1,abs(l)); \/\/ contour\n\n    float col = v0 *(cos(8.*31.4*uv0.x)*cos(8.*31.4*uv0.y))\n          + (1.-v0)*( d1==1. ? cos(2.*31.4*( q>0. ? 2.-uv.y : uv.y )*m.x\/size)  \n                             : cos(2.*31.4*(uv.x*m.x\/size0)) );\n    if (keyToggle(32)) v\/= 1.+.5*d;\n\tfragColor = vec4(col*v);\n}","name":"","description":"","type":"image"}]}}