{"Shader":{"ver":"0.1","info":{"id":"llXSRr","date":"1434008578","viewed":678,"name":"message: click to see","username":"FabriceNeyret2","description":"Some shaders cannot give a working icon, typically when not all fragments are drawn at each frame.<br\/>Here, we show how to add a text message to the icon to alert and invite the users to click to see the real thing.","likes":1,"published":3,"flags":0,"tags":["font"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ add a text alert in the icon view \n\nfloat message(vec2 p) {  \/\/ the alert function to add to your shader\n    int x = int(p.x+1.)-1, y=int(p.y)-10,  i;\n    if (x<1||x>32||y<0||y>2) return -1.; \n    i = ( y==2? i=  757737252: y==1? i= 1869043565: y==0? 623593060: 0 )\/ int(exp2(float(32-x)));\n \treturn i==2*(i\/2) ? 1. : 0.;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n    if (iResolution.y<2000.) { \/\/ replace by 200 to display only in the icon \n        float c=message(fragCoord.xy\/8.); if(c>=0.){ fragColor=vec4(c);return; } }\n\n    \n    \/\/ your shader\n\tvec2 uv = fragCoord.xy \/ iResolution.xy;\n\tfragColor = vec4(uv,0.5+0.5*sin(iGlobalTime),1.0);\n}\n\n\n\n\n\n\n\/*  \/\/ expended version: \nfloat message(vec2 uv) {\n    uv-=vec2(1.,10.); if ((uv.x<0.)||(uv.x>=32.)||(uv.y<0.)||(uv.y>=3.)) return -1.; \n    int i=1, bit=int(pow(2.,floor(32.-uv.x)));\n    if (int(uv.y)==2) i=  757737252\/bit; \/\/ 11010010 11010101 11011000 11011011\n    if (int(uv.y)==1) i= 1869043565\/bit; \/\/ 10010000 10011000 10101000 10010010\n    if (int(uv.y)==0) i=  623593060\/bit; \/\/ 11011010 11010100 10111001 10011011\n \treturn float(1-i+2*(i\/2));\n}\n*\/\n\n\n\n\/* \/\/ more expended version: \n\nfloat decode(int char, float x) {\n    int i = ((x<0.)||(x>=32.)) ? 1 : char \/ int(pow(2.,floor(32.-x)));\n\treturn float(1-i+2*(i\/2));\n}\n\nfloat message(vec2 uv) {\n    float c=0.;\n    if (int(uv.y)==12) c = decode( 757737252, uv.x); \/\/ 11010010 11010101 11011000 11011011\n    if (int(uv.y)==11) c = decode(1869043565, uv.x); \/\/ 10010000 10011000 10101000 10010010\n    if (int(uv.y)==10) c = decode( 623593060, uv.x); \/\/ 11011010 11010100 10111001 10011011\n \treturn c;\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) {\n\n    fragColor = vec4(message((fragCoord.xy-iResolution.xy\/2.)\/8.));\n}\n\n*\/","name":"","description":"","type":"image"}]}}