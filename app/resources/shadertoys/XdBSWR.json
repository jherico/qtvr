{"Shader":{"ver":"0.1","info":{"id":"XdBSWR","date":"1410613824","viewed":761,"name":"canvas","username":"FabriceNeyret2","description":"tune with mouse x and y.  <br\/>Space to show tiles.","likes":3,"published":3,"flags":16,"tags":["canvas","short"],"hasliked":0},"renderpass":[{"inputs":[{"id":2,"src":"\/presets\/tex01.jpg","ctype":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}},{"id":6,"src":"\/presets\/tex05.jpg","ctype":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}},{"id":8,"src":"\/presets\/tex07.jpg","ctype":"texture","channel":2,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}},{"id":33,"src":"\/presets\/tex00.jpg","ctype":"keyboard","channel":3,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"float t = iGlobalTime;\nbool keyToggle(int ascii) {\n\treturn (texture2D(iChannel3,vec2((.5+float(ascii))\/256.,0.75)).x > 0.);\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv0 = fragCoord.xy \/ iResolution.y;\n    vec2 m = iMouse.xy\/iResolution.xy;\n    if (iMouse.z<=0.) { \/\/ autodemo \n\t\t    uv0 += vec2(1.8*cos(.15*t)+.5*sin(.4*t),sin(.22*t)-.5*cos(.3*t));\n            uv0 *= 1.5-cos(.2*t);\n\t\t\tm = .5+.5*vec2(cos(t),sin(.6*t)); m.y*=m.x;\n    }\n\n    vec2 uv = uv0*10.;\n    float d = mod(floor(uv.x)+floor(uv.y),2.), s = mod(floor(uv.y),2.);\n    uv = fract (uv); if (d==1.) uv.x = 1.-uv.x; \/\/ checkered tile coordinates\n    uv = vec2(uv.x-uv.y,uv.x+uv.y);\n \n    float size = m.x+m.y*cos(.5*3.1415927*uv.y) *sign(s-.5)*sign(d-.5);\n    float l = abs(uv.x)-size;\n    float v = smoothstep(0.,.1,abs(l));\n    float v0 = step(0.,l);\n    \n    size = m.x+m.y*cos(.5*3.1415927*uv.x); \n    float ofs = (1.-size)*sign(s-.5)*sign(d-.5); \/\/ corner distance\n    l = (uv.y-1.)-ofs;\n    float v1 = step(0.,l);\n    float d0 =  mod(s+v1,2.);\n    float d1 =  mod(s+d+v1,2.); \/\/ corner area\n    v0 = ((d1<1.)?v0:0.); \/\/ background\n    v = ((d1<1.)?v:1.)*smoothstep(0.,.1,abs(l)); \/\/ contour\n\n    vec4 col = v0*texture2D(iChannel2,uv0) \n        + (1.-v0)*((d0==0.) ? texture2D(iChannel0,uv0) : texture2D(iChannel1,uv0));\n    if (keyToggle(32)) v\/= 1.+.5*d;\n\tfragColor = col*v;\n}","name":"","description":"","type":"image"}]}}