{"Shader":{"ver":"0.1","info":{"id":"4lj3zy","date":"1430075238","viewed":727,"name":"Meta Experiment 8","username":"aiekick","description":"Each cells is a similar 2d metaball code<br\/>Click on cell and keep down to see in full size","likes":6,"published":3,"flags":0,"tags":["experiment","meta","8"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ Created by Stephane Cuillerdier - Aiekick\/2015\n\/\/ License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\nvec2 gridSize = vec2(4.,3.);\/\/grid size (columns, rows)\n    \nvec2 s,g,h,m;\nfloat z,t;\n   \t\nfloat e0(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = uv * vec2(cos(uv.y*p-t),sin(uv.x*p-t))*a;\n   \treturn 0.3\/dot(uvSin.xyxy,uvSin.yxxy);\n}\nfloat e1(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = uv + vec2(cos(uv.y*p-t),sin(uv.x*p-t))*a;\n   \treturn 0.3\/dot(uvSin.xyxy,uvSin.yxxy);\n}\nfloat e2(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = uv + vec2(cos(uv.y*p-t),sin(uv.x*p-t))*a;\n   \treturn 0.3\/dot(uvSin,uvSin);\n}\nfloat e3(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = uv + vec2(cos(uv.y*p-t),sin(uv.x*p-t))*a;\n   \treturn 0.3\/dot(uvSin.xy,uvSin.yx);\n}\nfloat e4(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = uv + vec2(cos(uv.y*p-t),sin(uv.x*p-t))*a;\n   \treturn 0.3\/dot(uvSin.xx,uvSin.yx);\n}\nfloat e5(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = uv + vec2(cos(uv.y\/p-t),sin(uv.x*p-t))\/a\/a;\n    return 0.3\/dot(uvSin.xy,uvSin.yy);\n}\nfloat e6(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = uv + vec2(cos(uv.y*p-t),sin(uv.x\/p-t))\/a\/p;\n    return 0.3\/dot(uvSin.xxyx,uvSin.xyxx);\n}\nfloat e7(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = 0.2\/dot(uv,uv) * vec2(cos(uv.y*p-t)*p\/a,sin(uv.x*p))*a;\n   \treturn dot(uvSin,uvSin)\/1.2;\n}\nfloat e8(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = 0.2\/dot(uv,uv.xx) * vec2(cos(uv.y*p-t)*p\/a,sin(uv.x*p))*a;\n   \treturn dot(uvSin,uvSin)\/(p*p*0.25);\n}\nfloat e9(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = 0.3\/dot(uv.xyyx,uv.yxxy) * vec2(cos(uv.y*p-t)\/p,sin(uv.x*p-t)*p)\/a;\n   \treturn dot(uvSin.xyxy,uvSin.yxxy)\/1.2;\n}\nfloat e10(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = 0.3\/dot(uv.xxy,uv.yxx) \/ vec2(cos(uv.y*p)*p,sin(uv.x*p-t)\/p)\/a;\n   \treturn 0.3\/dot(uvSin,uvSin\/p);\n}\nfloat e11(vec2 uv, float a, float p, float t) \/\/ ok\n{\n    vec2 uvSin = uv \/ vec2(cos(uv.y*p-t),sin(uv.x*p-t))*a\/p;\n   \treturn 0.1\/dot(uvSin,uvSin);\n}\nfloat EncID(vec2 s, vec2 h, vec2 sz) \/\/ encode id from coord \/\/ s:screenSize \/ h:pixelCoord \/ sz=gridSize\n{\n    float cx = floor(h.x\/(s.x\/sz.x));\n    float cy = floor(h.y\/(s.y\/sz.y));\n    return cy*sz.x+cx;\n}\nvec2 DecID(float id, vec2 sz) \/\/ decode id to coord \/\/ id:cellId \/ sz=gridSize\n{\n    float cx = mod(float(id), sz.x);\n    float cy = (float(id)-cx)\/sz.x;\n    return vec2(cx,cy);\n}\nvec3 getcell(vec2 s, vec2 h, vec2 sz) \/\/ return id \/ uv\n{\n    float cx = floor(h.x\/(s.x\/sz.x));\n    float cy = floor(h.y\/(s.y\/sz.y));\n    \n    float id = cy*sz.x+cx;\n    \n    vec2 size = s\/sz;\n    float ratio = size.x\/size.y;\n    vec2 uv = (2.*(h)-size)\/size.y - vec2(cx*ratio,cy)*2.;\n    uv*=1.5;\n    \n    return vec3(id, uv);\n}\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    z = 3.;\n    t = iGlobalTime*5.;\n    s = iResolution.xy;\n    h = fragCoord.xy;\n    g = z*(2.*h-s)\/s.y;\n    m = iMouse.xy;\n    \n    float d=0.;\n    vec3 cell = getcell(s,h,gridSize);\n    if(iMouse.z>0.) {cell.x = EncID(s,m,gridSize);cell.yz = g;}\n    \n    if (cell.x == 0.) d = e0(cell.yz, 1.5, 10., t);\n    else if (cell.x == 1.) d = e1(cell.yz, 1.5, 10., t);\n   \telse if (cell.x == 2.) d = e2(cell.yz, 1.5, 10., t);\n   \telse if (cell.x == 3.) d = e3(cell.yz, 1.5, 10., t);\n   \telse if (cell.x == 4.) d = e4(cell.yz, 1.5, 10., t);\n   \telse if (cell.x == 5.) d = e5(cell.yz, 1.5, 10., t);\n   \telse if (cell.x == 6.) d = e6(cell.yz, 1.5, 10., t);\n   \telse if (cell.x == 7.) d = e7(cell.yz, 1.5, 10., t);\n   \telse if (cell.x == 8.) d = e8(cell.yz, 1.5, 10., t);\n   \telse if (cell.x == 9.) d = e9(cell.yz, 1.5, 10., t);\n   \telse if (cell.x == 10.) d = e10(cell.yz, 1.5, 10., t);\n   \telse if (cell.x == 11.) d = e11(cell.yz, 1.5, 10., t);\n   \t \n    vec3 c = vec3(mix(1.\/d, d, 1.),mix(1.\/d, d, 3.),mix(1.\/d, d, 5.));\n    \n    fragColor.rgb = c;\n    fragColor.a = 1.;\n}","name":"","description":"","type":"image"}]}}