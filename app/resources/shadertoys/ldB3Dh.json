{"Shader":{"ver":"0.1","info":{"id":"ldB3Dh","date":"1386884972","viewed":1007,"name":"Mrs Scary","username":"Dave_Hoskins","description":"She speaks with forked eyes!!! Playing with TekF's 'Retro Parallax' ( https:\/\/www.shadertoy.com\/view\/4sSGD1 )<br\/>It uses smoothstep to zoom and pan the camera using the video's frame time information.<br\/><br\/>","likes":29,"published":3,"flags":0,"tags":["video","mrsscary"],"hasliked":0},"renderpass":[{"inputs":[{"id":29,"src":"\/presets\/vid02.ogv","ctype":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"\/\/ By Dave Hoskins.\n\/\/ Playing with TekF's 'Retro Parallax'\n\/\/ https:\/\/www.shadertoy.com\/view\/4sSGD1\n\/\/ To keep her scary noggin in the frame it uses\n\/\/ the channel time to pan the video.\n\/\/ Then move back towards the text.\n\nmat2 RotateMat(float angle)\n{\n\tfloat si = sin(angle);\n\tfloat co = cos(angle);\n\treturn mat2(co, si, -si, co);\n}\n\n\nvec3 Colour(in float h)\n{\n\th = h * 4.0;\n\treturn clamp( abs(mod(h+vec3(0.,4.,2.),6.)-3.)-1., 0., 1. );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tfloat time = iChannelTime[0];\n\n\t\/\/ Rough panning...\n\tvec2 pixel = (fragCoord.xy - iResolution.xy*.5)\/iResolution.xy \n\t+ vec2(0.0,.1-smoothstep(9.0, 12.0, time)*.35\n\t+ smoothstep(18.0, 20.0, time)*.15);\n\n\tvec3 col;\n\tfloat n;\n\tfloat inc = (smoothstep(17.35, 18.5, time)-smoothstep(18.5, 21.0, time)) * (time-16.0) * 0.1;\n\n\tmat2 rotMat = RotateMat(inc);\n\tfor (int i = 1; i < 50; i++)\n\t{\n\t\tpixel = pixel * rotMat;\n\n\t\tfloat depth = 40.0+float(i) + smoothstep(18.0, 21.0, time)*65.;\n\n\t\tvec2 uv = pixel * depth\/210.0;\n\n\t\t\/\/ Shifting the pan to the text near the end...\n\n\t\t\/\/ And shifts to the right again for the last line of text at 23:00!\n\t\tcol = texture2D( iChannel0, fract(uv+vec2(.5 + smoothstep(20.0, 21.0, time)*.11\n\t\t + smoothstep(23.0, 23.5, time)*.04\n\t\t  , .7-smoothstep(20.0, 21.0, time)*.2))).rgb;\n\t\t  col = mix(col, col * Colour((float(i)\/50.0+iGlobalTime)), smoothstep(18.5, 21.5, time));\n\n\t\t  if ((1.0-(col.y*col.y)) < float(i+1) \/ 50.0)\n\t\t  {\n\t\t  \tbreak;\n\t\t  }\n\n\t}\n\n\t\/\/ Some contrast...\n\tcol = min(col*col*1.5, 1.0);\n\t\/\/ Fade to red evil face...\n\tfloat gr = smoothstep(17., 16., time) + smoothstep(18.5, 21.0, time);\n\tfloat bl = smoothstep(17., 15., time) + smoothstep(18.5, 21.0, time);\n\tcol = col * vec3(1.0, gr, bl);\n\t\/\/ Cut off the messy end...\n\tcol *= smoothstep(29.5, 28.2, time);\n\tfragColor = vec4(col, 1.0);\n}","name":"","description":"","type":"image"}]}}