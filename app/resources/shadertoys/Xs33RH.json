{"Shader":{"ver":"0.1","info":{"id":"Xs33RH","date":"1447921772","viewed":492,"name":"one cube challenge - v3   (262)","username":"FabriceNeyret2","description":"the line-drawing version<br\/>See instructions here: https:\/\/www.shadertoy.com\/view\/ldd3zr","likes":10,"published":3,"flags":0,"tags":["cube","2tweets","short","codegolf"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ reduction by Coyote: 262\n                                                 \/\/ draw segment [a,b]\n#define L  *I ; o+= 3e-3 \/ length( clamp( dot(u-a,v=b-a)\/dot(v,v), 0.,1.) *v - u+a )\n#define P  ; b=c= vec2(r.x,1)\/(4.+r.y) L;   b=a L;   a=c L;   a=c; r= I*r.yx;\n\nvoid mainImage(out vec4 o, vec2 v)\n{\n\tvec2 I=vec2(1,-1), a,b,c=iResolution.xy, \n         u = (v+v-c)\/c.y,\n         r = sin(iDate.w-.8*I); r += I*r.yx  \/\/ .8-.8*I = vec2(0,1.6)\n    P  o-=o        \/\/ just to initialize a\n\tP P P P        \/\/ 4*3 segments\n\n}\n\/**\/\n\n\n\n\/*\/\/ reduction by Nrx: 264\n                                                 \/\/ draw segment [a,b]\n#define L  *I ; o+= 3e-3 \/ length( clamp( dot(u-a,v=b-a)\/dot(v,v), 0.,1.) *v - u+a ) ;\n#define P  ; b=c= vec2(r.x,1)\/(4.+r.y) L   b=a L   a=c L   a=c; r= I*r.yx;\n\nvoid mainImage(out vec4 o, vec2 v)\n{\n\tvec2 I=vec2(1,-1), a,b,c=iResolution.xy, \n         u = (v+v-c)\/c.y,\n         r = sin(iDate.w-.8*I); r += I*r.yx  \/\/ .8-.8*I = vec2(0,1.6)\n    P  o-=o        \/\/ just to initialize a\n\tP P P P        \/\/ 4*3 segments\n\n}\n\/**\/\n\n\n\n\n\/* \/\/ reduction by FabriceNeyret2: 270 -1 by Nrx\n                                                 \/\/ draw segment [a,b]\n#define L ; o+= 3e-3 \/ length( clamp( dot(u-a,v=b-a)\/dot(v,v), 0.,1.) *v - u+a ) ;\n#define P   b=c= vec2(r.x,1)\/(4.+r.y) L   b=a*I L   a=c*I L   a=c; r= I*r.yx;\n\nvoid mainImage(out vec4 o, vec2 U)\n{\n\tvec2 I=vec2(1,-1), a,b,c=iResolution.xy, \n         u = (U+U-c)\/c.y,\n         v = sin(iDate.w-.8*I), r = v + I*v.yx;  \/\/ .8-.8*I = vec2(0,1.6)\n    P  o-=o       \/\/ just to initialize a\n\tP P P P        \/\/ 4*3 segments\n\n}\n\/**\/\n\n\n\n\/* \/\/ reduction by FabriceNeyret2: 285\n                                                 \/\/ draw segment [a,b]\n#define L ; o+= 3e-3 \/ length( clamp( dot(u-a,v=b-a)\/dot(v,v), 0.,1.) *v - u+a ) ;\n#define P   b=c= vec2(l,1)\/(4.+m) L   b=a*I L   a=c*I L   a=c; e=l; l=m; m=-e;\n\nvoid mainImage(out vec4 o, vec2 u)\n{\n\tvec2 v, I=vec2(1,-1), a,b,c=iResolution.xy;\n\tu = (u+u-c)\/c.y;   \n\tfloat m=iDate.w, l=sin(m), e; m=cos(m)-l; l+=m+l;\n    P  o-=o;       \/\/ just to initialize a\n\tP P P P        \/\/ 4*3 segments\n\n}\n\/**\/\n\n\n\/* \/\/ reduction by FabriceNeyret2: 303\n                                                 \/\/ draw segment [a,b]\n#define L ; o+=3e-3\/length(clamp(dot(u-a,v=b-a)\/dot(v,v),0.,1.)*v-u+a);\n#define P(A,B) b=c=vec2(A,1)\/(4.+B) L b=a*I L a=c*I L a=c;\n\nvoid mainImage(out vec4 o, in vec2 u)\n{\n\tvec2 v, I=vec2(1,-1), a,b,c;\n\tu = 2.*u\/iResolution.y - 1.4-.4*I;   \/\/ - vec2(1.8,1)\n\tfloat m=iDate.w, l=sin(m); m=cos(m)-l; l+=m+l;\n    P( l, m ) o-=o;  \/\/ just to initialize a\n\tP( m,-l )        \/\/ --- draw 4*3 segments\n\tP(-l,-m )\n\tP(-m, l )\n\tP( l, m )\n}\n\/**\/\n\n\n\n\/* \/\/ reduction by Nrx: 318\n                                                 \/\/ draw segment [a,b]\n#define L o+=3e-3\/length(clamp(dot(u-a,v=b-a)\/dot(v,v),0.,1.)*v-u+a);\n#define P(A,B) b=c=vec2(A,1)\/(4.+B); L b=a*I; L a=c*I; L a=c;\n\nvoid mainImage(out vec4 o, in vec2 u)\n{\n\to-=o;\n\tu = 2.*u\/iResolution.y - vec2(1.8,1); \n\tfloat m=iDate.w, l=sin(m); m=cos(m)-l; l+=m+l;\n\tvec2 v, I=vec2(1,-1), a=vec2(l,1)\/(4.+m), b,c;\n\tP( m,-l)   \n\tP(-l,-m)\n\tP(-m, l)\n\tP( l, m)\n}\n\/**\/\n\n\n\n\/* \/\/ reduction by Nrx: 347\n                                                 \/\/ draw segment [a,b]\n\/\/ #define L(a,b) (l=dot(w=u-a,v=b-a))>0.&&l<(m=dot(v,v))      ? o += 3e-5\/(dot(w,w)-l*l\/m) :o;\n\/\/ #define L(a,b)  l=dot(w=u-a,v=b-a); m=l*l\/dot(v,v);   l > m ? o += 3e-5\/(dot(w,w)-m)     :o;\n\/\/ #define L(a,b) o+=3e-5\/dot(v=clamp(dot(u-a,v=b-a)\/dot(v,v),0.,1.)*v-u+a,v);\n   #define L(a,b)  o+=3e-3\/length( clamp( dot(u-a,v=b-a)\/dot(v,v), 0.,1. ) *v - u+a );\n\n#define Z(x,y)  vec2( x,1 ) \/ ( 4.+y )           \/\/ perspective transform\n#define P(A,B)  L(A,B)  L(A*I,B*I)  L(A,A*I)     \/\/ draw 1 top segment + 1 bottom + 1 vertical\n\nvoid mainImage( out vec4 o, in vec2 u )\n{\n    o-=o;\n    u = 2.*u\/iResolution.y - vec2(1.8,1); \n    \n    float m=iDate.w, l=sin(m); m=cos(m)-l; l+=m+l;\n    vec2  v, I=vec2(1,-1), \n          a=Z(l,m), b=Z(m,-l), c=Z(-l,-m), d=Z(-m,l); \/\/ 4 top vertices screen coords\n\n          P(a,b) P(b,c) P(c,d) P(d,a)                 \/\/ draw 4*3 segments\n}\n\/**\/\n\n\n\n\/*\n\/\/ reduction by FabriceNeyret2 : 366\n                                                 \/\/ draw segment [a,b]\n#define L(a,b)  l=dot(w=u-a,v=b-a)\/(m=length(v)), l>.0&&l<m ? o += 3e-5\/(dot(w,w)-l*l)   :o;\n\n#define Z(x,y)  vec2( x,1 ) \/ ( 4.+y )           \/\/ perspective transform\n#define P(A,B)  L(A,B)  L(A*I,B*I)  L(A,A*I)     \/\/ draw 1 top segment + 1 bottom + 1 vertical\n\nvoid mainImage( out vec4 o, in vec2 u )\n{\n    o-=o;\n    u = 2.*u\/iResolution.y - vec2(1.8,1); \n    \n    float t=iDate.w, l,m, \n          S=-sin(t),C=cos(t),P=C+S,M=C-S;\n    vec2  v,w, I=vec2(1,-1),\n          a = Z(M,P), b = Z(P,-M), c = Z(-M,-P), d = Z(-P,M); \/\/ 4 top vertices screen coords\n\n          P(a,b) P(b,c) P(c,d) P(d,a)                         \/\/ draw 4*3 segments\n}\n\/**\/\n\n\n\n\/*\n\/\/ reduction by FabriceNeyret2 : 382\n\n#define L(a,b) l=dot(w=u-a,v=b-a)\/(m=length(v)), l>.0&&l<m ? o += 3e-5\/(dot(w,w)-l*l) :o;\n#define Z(A) vec2( (A).x,1 ) \/ ( 4.+(A).y )\n#define P(A,B)  L(A,B)  L(A*I,B*I)  L(A,A*I)\n\nvoid mainImage( out vec4 o, in vec2 u )\n{\n    o-=o;\n    u = 2.*u\/iResolution.y -vec2(1.8,1); \n    \n    float t=iDate.w, S=-sin(t),C=cos(t),l,m;\n    vec2 i=vec2(C,S),k=vec2(-S,C), v,w, I=vec2(1,-1),\n         a =  Z(i+k), b =  Z(i-k), c = Z(-i-k), d = Z(k-i);\n\n    P(a,b) P(b,c) P(c,d) P(d,a)\n}\n\/**\/\n\n\n\n\/*\n\/\/ reduction by FabriceNeyret2 : 408\n\n#define L(a,r,b,s) l=dot(w=u-vec2(a,r),v=vec2(b-a,s-r))\/(m=length(v)), l>.0&&l<m ? o += 3e-5\/(dot(w,w)-l*l) :o;\n\n#define P(A,B) r=1.\/(4.+A.y);  s=1.\/(4.+B.y); L(A.x*r,r,B.x*s,s) L(A.x*r,-r,B.x*s,-s) L(A.x*r,r,A.x*r,-r)\n\nvoid mainImage( out vec4 o, in vec2 u )\n{\n    o-=o;\n    u = 2.*u\/iResolution.y -vec2(1.8,1); \n    \n    float t=iDate.w, S=-sin(t),C=cos(t),l,m,r,s;\n    vec2 i=vec2(C,S),k=vec2(-S,C), v,w,\n         a =  i+k, b =  i-k, c = -i-k, d = -i+k;\n\n    P(a,b) P(b,c) P(c,d) P(d,a)\n}\n\/**\/\n\n\n\n\/*\n\/\/ reduction by Nrx: 419\n\n#define L(u,a,b) (l=dot(w=u-a,v=b-a))>0.&&l<(m=dot(v,v))?o+=3e-5\/(dot(w,w)-l*l\/m):o;\n#define P(A,B) L(u,A.xy\/(4.+A.z),B.xy\/(4.+B.z));\n\nvoid mainImage( out vec4 o, in vec2 u )\n{\n    o-=o;\n    u = 2.*u\/iResolution.y -vec2(1.8,1); \n\n\tfloat t=iDate.w, S=sin(t), C=cos(t), l, m;\n\tvec2 v,w;\n\tvec3 i=vec3(C,0,-S),j=vec3(0,1,0),k=vec3(S,0,C),\n         a=i+j+k, b=i+j-k, c=i-j-k, d=i-j+k;\n\n    P(a,b) P(b,c) P(c,d) P(d,a)\n    P(-c,-d) P(-d,-a) P(-a,-b) P(-b,-c)\n    P(a,-c) P(b,-d) P(c,-a) P(d,-b)\n}\n\/**\/\n\n\n\n\n\/*\n\/\/ original by FabriceNeyret2 449\n\n#define L(u,a,b) l=dot(w=u-a,v=b-a)\/(m=length(v)), l>.0&&l<m ? o += 3e-3\/sqrt(dot(w,w)-l*l) :o;\n\n#define P(A,B) L(u,A.xy\/(4.+A.z),B.xy\/(4.+B.z));\n\nvoid mainImage( out vec4 o, in vec2 u )\n{\n    o-=o;\n    u = 2.*u\/iResolution.y -vec2(1.8,1); \n    \n    float t=iDate.w, S=-sin(t),C=cos(t),l,m;\n    vec2 v,w;\n    \/\/mat3 M = mat3(C,0,S,0,1,0,-S,0,C);\n    \/\/vec3 a = vec3( 1, 1, 1)*M, b = vec3( 1, 1, -1)*M,\n    \/\/     c = vec3( 1,-1,-1)*M, d = vec3( 1,-1,  1)*M,\n    \/\/     e = vec3(-1, 1, 1)*M, f = vec3(-1, 1, -1)*M,\n    \/\/     g = vec3(-1,-1,-1)*M, h = vec3(-1,-1,  1)*M;\n    vec3 i=vec3(C,0,S),j=vec3(0,1,0),k=vec3(-S,0,C),\n         a =  i+j+k, b =  i+j-k, c =  i-j-k, d =  i-j+k,\n         e = -i+j+k, f = -i+j-k, g = -i-j-k, h = -i-j+k;\n\n    P(a,b) P(b,c) P(c,d) P(d,a)\n    P(e,f) P(f,g) P(g,h) P(h,e)\n    P(a,e) P(b,f) P(c,g) P(d,h)\n}\n\/**\/","name":"","description":"","type":"image"}]}}