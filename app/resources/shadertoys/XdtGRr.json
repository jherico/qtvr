{"Shader":{"ver":"0.1","info":{"id":"XdtGRr","date":"1447759532","viewed":370,"name":"My 21st Birthday","username":"834144373","description":"Some bug,it's diffirent between shadertoy and glslsandbox.      My dream is to become a organic chemist,but I can only be seen.<br\/><a href=\"http:\/\/www.glslsandbox.com\/e#28924.0\" class=\"regular\" target=\"_blank\">http:\/\/www.glslsandbox.com\/e#28924.0<\/a><br\/><a href=\"http:\/\/www.glslsandbox.com\/e#28925.0\" class=\"regular\" target=\"_blank\">http:\/\/www.glslsandbox.com\/e#28925.0<\/a>","likes":3,"published":3,"flags":0,"tags":["3d","distancefield","raymarch","birthday","happybirthday"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/My 21st Birthday.glsl\n\/\/License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\/\/Created by 834144373 (\u606c\u7eb3\u5fae\u6670) \u795d\u5143\u6d2a 2015\/11\/17\n\/\/Tags: Birthday, 3D, Raymarching,Happy Birthday,Milk and Edge.\n\/\/Original: https:\/\/www.shadertoy.com\/view\/XdtGRr\n\/\/\n\/\/-------Birthday(\u751f\u65e5):11\/18\n\/\/-----------------------------------------------------------------------------------------\n#define PI 3.1415\n\/\/#define _PI 3.1415\n#define _2PI 6.2830\n\nfloat scale = 1.5 \/ 1000.0;\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nvec3 Rot(vec3 p,vec3 angles)\n{\n    vec3 c = cos(angles);\n    vec3 s = sin(angles);\n    \n    mat3 rotX = mat3( 1.0, 0.0, 0.0, 0.0,c.x,s.x, 0.0,-s.x, c.x);\n    mat3 rotY = mat3( c.y, 0.0,-s.y, 0.0,1.0,0.0, s.y, 0.0, c.y);\n    mat3 rotZ = mat3( c.z, s.z, 0.0,-s.z,c.z,0.0, 0.0, 0.0, 1.0);\n\t    \n    return p*rotX * rotY * rotZ;\n}\nvec3 Rotx(vec3 p,float angle){\n    float c = cos(angle);\n    float s = sin(angle);\t\n    return p*   mat3( c, s, 0.0,-s,c,0.0, 0.0, 0.0, 1.0);\n}\nvec3 Roty(vec3 p,float angle){\n    float c = cos(angle);\n    float s = sin(angle);\t\n    return p*mat3( c, 0.0,-s, 0.0,1.0,0.0, s, 0.0, c);\n    \/\/return p*mat3( c, s, 0.0,-s,c,0.0, 0.0, 0.0, 1.0);\t\n}\n\nvec3 Twist( vec3 p ,float a,float b)\n  {\n      float c = cos(a*p.y);\n      float s = sin(b*p.y);\n      mat2  m = mat2(c,-s,s,c);\n      vec3  q = vec3(m*p.xz,p.y);\n      return q;\n  }\nvec2 plane(vec3 pos,float id){\n\t\n\treturn vec2(pos.y,id);\n}\n\nvec2 plane_x(vec3 pos,float id){\n\treturn vec2(pos.x,id);\n}\nvec2 plane_y(vec3 pos,float id){\n\treturn vec2(pos.z,id);\n}\nvec2 sdPlane( vec3 p, vec4 n, float id )\n{\n  float d =  dot(p,n.xyz) + n.w;\n  return vec2(d,id);\n}\n\nvec2 sphere( vec3 pos,float r,float id){\n\tfloat d = length(pos)-r;\n\treturn vec2(d,id);\n}\n\nvec2 box( vec3 pos,vec3 xyz,float o,float id){\n\tfloat d = length( max(abs(pos)-xyz,0.0))-o;\n\treturn vec2(d,id);\n}\n\nvec2 cylinder(vec3 pos,vec2 h,float id){\n\n\tvec2 d = abs(vec2(length(pos.xz),pos.y)) - h;\n\t\n\treturn vec2(min(max(d.x,d.y),0.0) + length(max(d,0.0)),id);\n}\n\nvec2 torus(vec3 pos,vec2 h){\n  vec2 q = vec2(length(pos.xz)-h.x,pos.y);\n  return vec2(length(q)-h.y,1.);\n}\n\/\/------------\n\nfloat dfLine(vec2 start, vec2 end, vec3 p){\n\tstart *= scale;\n\tend *= scale;\n\tvec2 line = end - start;\n\tfloat frac = dot(p.xy - start,line) \/ dot(line,line);\n\t\n\tfloat d = distance(start + line * clamp(frac, 0.0, 1.0), p.xy);\n\t\n\tfloat dd = length(vec2(d-0.,p.z-0.))-0.01;\n\treturn dd;\n}\n\n\/\/Distance to the edge of a circle.\nfloat dfCircle(vec2 origin, float radius, vec3 p)\n{\n\torigin *= scale;\n\tradius *= scale;\n\t\n\tfloat d =  abs(length(p.xy - origin) - radius);\n\t\n\tfloat dd = length(vec2(d,p.z))-0.01;\n\treturn dd;\n}\n\n\/\/Distance to an arc.\nfloat dfArc(vec2 origin, float start, float sweep, float radius, vec3 p)\n{\n\torigin *= scale;\n\tradius *= scale;\n\tp.xy -= origin;\n\tp.xy *= mat2(cos(start), sin(start),-sin(start), cos(start));\n\t\n\tfloat offs = (sweep \/ 2.0 - 3.14);\n\tfloat ang = mod(atan(p.y, p.x) - offs, 6.28) + offs;\n\tang = clamp(ang, min(0.0, sweep), max(0.0, sweep));\n\t\n\tfloat d =  distance(radius * vec2(cos(ang), sin(ang)), p.xy);\n\t\n\tfloat dd = length(vec2(d,p.z))-0.01;\n\treturn dd;\n\t\n}\n\/\/------------\n\n\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nvec2 Min( vec2 d1, vec2 d2 ){\n  return (d1.x < d2.x) ? d1 : d2;\n}\n\nvec2 Smin(vec2 d1,vec2 d2,float c){\n\tfloat a = abs(1. - abs(d1.x-d2.x));\n\tvec2 b = Min(d1,d2);\n\tfloat d = b.x - exp(-a)\/c;\n\treturn vec2(d,b.y);\n}\nvec2 smin(vec2 a, vec2 b, float k) {\n\tfloat h = clamp(0.5 + 0.5 * (b.x - a.x) \/ k, 0.0, 1.0);\n\tfloat id = Min(a,b).y;\n\tfloat d = mix(b.x, a.x, h) - k * h * (1.0 - h);\n\treturn vec2(d,id);\n}\n\nvec2 smooth_min (vec2 d1, vec2 d2, float k) {    \/\/inigo quile's min\n    \tfloat a = pow(d1.x, k), b= pow(d2.x, k);\n    \tfloat d = pow((a*b)\/(a + b), 1.0\/k);\n\treturn vec2(d,Min(d1,d2).y);\n}\n\nvec2 Max( vec2 d1, vec2 d2 )\n{\n  return (d1.x > d2.x) ? d1 : d2;\n}\n\nvec2 Smax( vec2 d1, vec2 d2 )\n{\n  return (-d1.x > d2.x) ? d1*vec2(-1,1) : d2;\n}\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\nvec3 opAngRep( vec3 p, float a, float off){\n\tvec2 polar   = vec2(atan(p.y, p.x), length(p.xy));\n\t     polar.x = mod (polar.x + a \/ 2.0 + off, a) - a \/ 2.0;\n\treturn vec3(polar.y * vec2(cos(polar.x),sin(polar.x)), p.z);\n}\n\nvec3 insAngObj(vec3 p,vec3 to,float r,float k){\n\tfloat an = atan(p.z,p.x)*4.;\n\t\n\tp.xz = abs(p.xz);\n\tp -= vec3(1.4);\n\treturn p;\n}\n\nvec2 _6( vec3 p, vec2 h ,float id)\n{\n    vec3 q = abs(p);\n    return vec2(max(q.z-h.y,max((q.x*0.866025+q.y*0.5),q.y)-h.x),id);\n}\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\n\nvec2 superTwist(vec3 p,float r,float Vertics,float Edges,float id){\n\tfloat edgeAngle  = _2PI \/ Edges;\n\tfloat vertexAngle  = _2PI \/ Vertics;\n\tvec3 angrep = opAngRep(p, vertexAngle, 0.0);\t\n\t     angrep = opAngRep(angrep.xzy - vec3(r,0,0), edgeAngle, atan(p.y,p.x) * 2. );\n\tvec2 d = sdPlane(angrep, normalize(vec4(2., .0, 0.0, -0.1)),id);\n\treturn vec2(d.x,id);\n}\n\nvec2 candle(vec3 pos){\n\tvec3 p0,p1,p2,p3,p4;\n\t\n\tp0 = pos;\n\t\tp0.xz = abs(p0.xz)-0.5;\n\tp1 = Roty(pos,PI\/3.);\n\t\tp1.xz = abs(p1.xz)-0.5;\n\tp2 = Roty(pos,PI\/6.);\n\t\tp2.xz = abs(p2.xz)-0.5;\n\t\n\tp3 = pos;\n    \tp3.xz = abs(p3.xz)-0.21;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t   \/\/p3.xz = abs(p3.xz)-0.3;\n\tp4 = Roty(pos,PI\/4.);\n\t\tp4.xz = abs(p4.xz)-0.21;\n\t\n\tvec2 d0 = box\t   ( p0\t,vec3(0.,0.4,0.)*0.4,0.00, \t1.);\n\tvec2 d1 = box\t   ( p1\t,vec3(0.,0.4,0.)*0.4,0.00, \t1.1); \n\tvec2 d2 = box\t   ( p2\t,vec3(0.,0.4,0.)*0.4,0.00, \t1.2);\n\t\n\tvec2 d3 = box\t   ( p3\t,vec3(0.,0.65,0.)*0.4,0.004, \t1.3);\n\tvec2 d4 = box\t   ( p4\t,vec3(0.,0.65,0.)*0.4,0.004, \t1.4);\n\t\n\tvec2 d;\n\t\td = Min(d0,d1);\t\n\t\td = Min(d,d2);\n\t\n\t\td = Min(d,d3);\n\t\td = Min(d,d4);\n\n\t\td = Min(d,box( pos,vec3(0.,0.9,0.)*0.4,0.008, 1.5));\n\treturn d;\n}\n\nfloat _2_1(vec3 p){\n\tfloat dist = 1.;\n\tp *= 0.4;\n\tp.xy -= vec2(-0.5,.2);\n\t\t\n\tdist = min(dist, dfLine( vec2(300.000,0.000),vec2(200.000,0.000), p));\n\tdist = min(dist, dfLine(vec2(216.371,26.726), vec2(272.714,55.457), p));\n\tdist = min(dist, dfArc(vec2(250.000,100.000),5.184, 4.241, 50.000, p));\n\tdist = min(dist, dfArc(vec2(230.000,0.000),2.042, 1.099, 30.000, p));\n\t\n\tp.xy -= vec2(0.4,0.);\n\tdist = min(dist, dfLine(vec2(150.000,150.000),vec2(150.000,0.000), p));\n\treturn dist;\n}\n\n\/\/85654359\nvec2 otherthing(vec3 pos){\n\t\/\/pos.y *= 2.2;\n\t\n\t\/\/vec2 d = sphere(pos-vec3(0.,-0.45,0.1),.06,8.);\n\tfloat d = _2_1(pos);\n\treturn vec2(d,8.);\n}\n\nvec2 thing(vec3 pos){\n\t\/\/lifang red\n\tvec2 d1 = candle(pos-vec3(0.,-0.022,0.)); \n\t\/\/cylinder  table\n\tvec2 d2 = cylinder(pos-vec3(0.,-1.,0.),\tvec2(1.8,.001),\t\t2.) - vec2(0.01*sin(pos.x*_2PI*6.)+0.01*sin(pos.z*_2PI*4.),0.);\n\t\/\/lifang blue\n\t\/\/vec2 d3 = box     (pos-vec3(1.,-0.7,1.),\t\tvec3(1.,1.,1.)*0.2,  0.,  \t3.);\n\t\n\t\/\/yuanzhu  zi se \n\tvec2 d5 = cylinder(pos-vec3(0.,-.6,0.),\tvec2(0.7,.28),\t\t\t5.);\n\tvec2 d5_1= cylinder(pos-vec3(0.,-1.,0.),\tvec2(0.8,0.1),\t\t\t5.);\n\t\n\t\/\/table\n\tvec2 d6 = cylinder(pos-vec3(0.,-1.02,0.),\tvec2(1.85,0.02),\t\t6. );\n\t\n\t\/\/super\n\tvec2 d7 = superTwist(pos.xzy-vec3(0.,0.,-0.35),0.67,16.,8.,7.);\n\t\t\/\/s.x += 0.01*sin(pos.x*3.*_2PI);\n\t\td5 = Min(d7,d5);\n\t\/\/cho\n\t\/\/vec2 d8 = otherthing(pos);\n\t\/\/\/\/\/\n\tvec2 d =  Min(d1,d2);\n\t\n\t     d = Min(d,d6);\n\t    \/\/ d = Min(d,superTwist(pos.xzy-vec3(0.,1.,0.),0.7,10.,6.,1.));\n\t    \/\/d = Max(d,s);\n\t     \/\/d = Min(d,d8);\n\treturn Min(d,Smin(d5,d5_1,8.));\n}\n\nvec2 evp(vec3 pos){\n\tvec2 d = vec2(1.);\n\t\n\t\/\/plane blue\n\tvec2 d0 = sdPlane (pos-vec3(0.,-4.,0.),normalize(vec4(0.,1.,0.,0.)),\t\t4. );\n\tvec2 d0_1 = plane_x(pos-vec3(-6.4,0.,0.),\t\t\t\t\t4.1);\n\tvec2 d0_2 = plane_y(pos-vec3(0.,0.,-6.4),\t\t\t\t\t4.2);\n\t\t\n\td = Min(Min(d0,d0_1),d0_2);\n\t\n\t\/\/d = Min(d,d1);\n\t\n\treturn d;\n}\n\t\nvec2 obj(vec3 pos){\n\t\n\tvec2 d0 = thing(pos-vec3(0.,0.5,0.));\n\tvec2 d1 = evp(pos);\n\tvec2 d  = Min(d0,d1);\n\treturn d;\n}\n\nvec2 dis(vec3 pos,vec3 p){\n\tfloat dd = 1.;\n\tvec2 d  ;\n\tfor(int i = 0;i<64;++i){\n\t\tvec3 sphere = pos+dd*p;\n\t\td = obj(sphere);\n\t\tdd += d.x;\n\t\tif(d.x<0.02 || dd>20.)break;\n\t}\n\treturn vec2(dd,d.y);\n}\n\nvec3 normal(in vec3 surface){\n\tvec2 offset = vec2(0.01,0.);\n\tvec3 nDir   = vec3(\n\t\tobj(surface + offset.xyy).x,\n\t\tobj(surface + offset.yxy).x,\n\t\tobj(surface + offset.yyx).x\n\t)-obj(surface).x;\n\t\n\treturn normalize(nDir);\n}\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\n\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nfloat My_edge_shadow(vec3 surface, vec3 lig_p,float mintd, float maxdd, float k0,float k1) {\n\tfloat start_d = mintd;\n\tfloat d = 0.0;\n\tfloat mind = 1.0;\n\tfor(int i = 0; i < 20; i++) {\t\t\n\t\td = obj(surface + start_d*lig_p).x;\n\t\tmind = min(mind, exp(d*k0)\/k1 );\n\t\tstart_d += d;\n\t\tif(start_d > maxdd) break;\n\t}\n\treturn mind;\n}\n\nfloat My_milk_shadow(vec3 surface, vec3 lig_p,float mintd, float maxdd, float k0,float k1,float k3) {\n\tfloat start_d = mintd;\n\tfloat d = 0.0;\n\tfloat mind = 1.0;\n\tfor(int i = 0; i < 20; i++) {\t\t\n\t\td = obj(surface + start_d*lig_p).x;\n\t\tmind = min(mind, abs(log(d*k0+k3))\/k1 );\n\t\tstart_d += d;\n\t\tif(start_d > maxdd) break;\n\t}\n\treturn mind;\n}\n\nfloat fresnel(vec3 dir,vec3 normal,float k){\n\treturn pow(max(0.,dot(dir,normal)),k);\n}\nfloat My_specular(vec3 vDir,vec3 lig, vec3 normal,float k){\n\tvec3 h = normalize(-vDir+lig);\n\t\tfloat spe = fresnel(h,normal,k);\n\treturn spe;\n}\n\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\/\nvoid mainImage(out vec4 color,in vec2 coord) {\n\n\tvec2 uv = (coord.xy - iResolution.xy\/2.)\/iResolution.y;\n\tvec2 mo = (iMouse.xy\/iResolution.xy-vec2(0.5,0.))*vec2(10.,1.);\n\t\n\tfloat t1 = -.4;\/\/ - min(mo.y*1.3,.4);\n\tfloat t2 = iGlobalTime*0.1;\n\tfloat t3 = 0.;\n\n\t\/\/ppppp\n\tvec3 p = normalize(vec3(uv,2.));\n\t\tp = Rot(p,vec3(t1,t2+mo.x,t3));\n\t\t\/\/p = Rotx(p,mo.y);\n\t\/\/\n\tvec3 campos = vec3(0.,0.,-6.8);\n\t\tcampos = Rot(campos,vec3(t1,t2+mo.x,t3));\t\n\t\t\/\/campos = Rotx(campos,mo.y);\n\t\/\/\n\tvec2 dd = dis(campos,p);\n\t\n\tvec3 col = vec3(0.8);\n\tif(dd.x<20.){\n\t\tvec3 surface = campos + dd.x*p;\n\t\tvec3 lig  \t= normalize(vec3(1.,1.,-1.));\n\t\t\/\/vec3 lig2 \t= normalize(vec3(-1.,1.,-1.));\n\t\t\n\t\t\/\/vec3 nDir \t= normal(surface);\n\t\t\/\/float diff  \t= max(0.,dot(lig2 ,nDir));\n\t\t\/\/float diff2 \t= max(0.,dot(lig,nDir));\n\t\t\/\/float spe \t= My_specular(p,lig,nDir,5.);\n\t\t\/\/float sh  \t= My_edge_shadow(surface,lig,.13,1.,8.,3.);\n\t\t\/\/float ssh\t= My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n        float sh,ssh;\n\t\tif(dd.y == 1. ){\n\t\t\t sh  = My_edge_shadow(surface,lig,.13,1.,8.,3.);\n\t\t\t ssh = My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n\t\t\tcol = vec3(1.,1.,.9)*max(sh,ssh);\n\t\t}\n\t\telse if(dd.y == 1.1){\n\t\t\t sh  = My_edge_shadow(surface,lig,.13,1.,8.,3.);\n\t\t\t ssh = My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n\t\t\tcol = vec3(.9,1.,1.)*max(sh,ssh);\n\t\t}\n\t\telse if(dd.y == 1.2){\n\t\t\t sh  \t= My_edge_shadow(surface,lig,.13,1.,8.,3.);\n\t\t\t ssh\t= My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n\t\t\tcol = vec3(1.,.9,1.)*max(sh,ssh);\n\t\t}\n\t\telse if(dd.y == 1.3){\n\t\t\t sh  \t= My_edge_shadow(surface,lig,.13,1.,8.,3.);\n\t\t\t ssh\t= My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n\t\t\tcol = vec3(1.,1.,1.)*max(sh,ssh);\n\t\t}\n\t\telse if(dd.y == 1.4){\n\t\t\t sh  \t= My_edge_shadow(surface,lig,.13,1.,8.,3.);\n\t\t\t ssh\t= My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n\t\t\tcol = vec3(0.9,.9,1.)*max(sh,ssh);\n\t\t}\n\t\telse if(dd.y == 1.5){\n\t\t\t sh  \t= My_edge_shadow(surface,lig,.13,1.,8.,3.);\n\t\t\t ssh\t= My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n\t\t\tcol = vec3(0.9,1.+(sin(iGlobalTime)+1.)*0.8,0.9)*max(sh,ssh);\n\t\t}\n\t\telse if(dd.y == 2.){\n\t\t\t ssh\t= My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\t\t\t\n\t\t\tcol = vec3(0.6,0.6,0.6)*ssh;\n\t\t}\n\t\t\/\/if(dd.y == 3.){col = vec3(0.,1.,1.)*sh;}\n\t\t\n\t\telse if(dd.y == 4.){\n\t\t\t ssh\t= My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n\t\t\tcol = vec3(.7,0.6,.7)*ssh\/1.2;\n\t\t}\n\t\telse if(dd.y == 4.1){col = vec3(1.,.5,0.);}\n\t\telse if(dd.y == 4.2){col = vec3(.5,.5,0.);}\n\t\n\t\telse if(dd.y == 5.){\n\t\t\t sh  \t= My_edge_shadow(surface,lig,.13,1.,8.,3.);\n\t\t\t ssh\t= My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n\t\t\tcol = vec3(1.,1.,1.)*max(ssh,sh);\n\t\t}\n\t\t\t\t\n\t\telse if(dd.y == 6. ){\n\t\t\tvec3  nDir \t= normal(surface);\n\t\t\tfloat diff  \t= max(0.,dot(lig,nDir));\n\t\t\tfloat spe \t= My_specular(p,lig,nDir,5.);\n\t\t\t sh  \t= My_edge_shadow(surface,lig,.13,1.,8.,3.);\t\n\t\t\tfloat c = mix(diff,pow(1.-diff,2.),0.7);\n\t\t\t      c = mix(c,spe,.7);\n\t\t\tcol = vec3(1.)*mix(c,sh,0.2);\n\t\t}\n\t\telse if(dd.y == 7.){\n\t\t\tssh\t= My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n\t\t\tcol = vec3(0.94,1.,1.)*(ssh);\t\t\t\t\n\t\t}\n\t\telse if(dd.y == 8.){\n\t\t\t\/\/col = vec3(1.,0.,0.)*(spe+diff);\n\t\t\t\/\/surface.xz *= 10.;\n\t\t    ssh\t= My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n\t\t\tcol = vec3(1.1,1.,1.4)*ssh;\/\/0.2*mix(vec3(1.7,0.6,0.2),vec3(1.8,1.8,1.2)*2.0,smoothstep(0.7,0.9,0.5+0.7*cos(surface.x*10.0+sin(surface.z*5.0))))+0.06*vec3(1.0,1.0,0.5);\n\t\t\t\/\/col *= diff;\n\t\t\t\n\t\t}\n\t\t\n\t\t\/\/you can uncomment this to see the milk_edge rend\n        \/\/float sh  = My_edge_shadow(surface,lig,.13,1.,8.,3.);\n\t\t\/\/float ssh\t= My_milk_shadow(surface-vec3(0.01,-0.,-0.0),lig,.13,1.,20.,2.5,6.3);\n\t\t\/\/col = vec3(max(sh,shh));\n\t}\n\t\n\tcolor = vec4(col, 1.0 );\n\n}","name":"","description":"","type":"image"}]}}