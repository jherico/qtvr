{"Shader":{"ver":"0.1","info":{"id":"Xdd3D7","date":"1450142820","viewed":216,"name":"Visual sorbet","username":"ap","description":"Simple program to bleach your eyes after watching something for a long time.","likes":6,"published":3,"flags":0,"tags":["balls","jitter"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\n\nfloat rand(float n)\n{\n    return fract(sin(n) * 43758.5453123);\n}\n\nvec2 rand2(in vec2 p)\n{\n    return fract(vec2(sin(p.x * 591.32 + p.y * 154.077), cos(p.x * 391.32 + p.y * 49.077)));\n}\n\n#define v4White vec4(1.0, 1.0, 1.0, 1.0)\n#define v4Black vec4(0.0, 0.0, 0.0, 1.0)\n#define v4Grey  vec4(0.5, 0.5, 0.5, 1.0)\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 uv = fragCoord \/ iResolution.y;\n\n    float freq = 10.0;\n    float gap = 1.0\/freq;\n    float ballrad = 0.3 * gap;\n    float jitterrad = 0.2 * gap;\n\n    vec2 param_pos = fract(uv + vec2(iGlobalTime \/ 10.0, 0.0));\n\n    param_pos = uv;\n\n    vec2 closest_center = floor(param_pos * freq + vec2(0.5)) \/ freq;\n\n    float black_or_white = 0.5 + 0.5 * sin(\n        2.0 * 3.14159 * \n        (rand((closest_center.x + 347.0) * (closest_center.y +129.0)) + iGlobalTime * 1.0));\n\n    closest_center = closest_center + jitterrad * 1.0 *\n        sin((iGlobalTime * 0.8 + rand2(closest_center)) * 6.28 +\n        sin((iGlobalTime * 0.2 + rand2(closest_center.yx)) * 6.28) +\n        sin((iGlobalTime * 0.5 + rand2(closest_center.xx * 93.0 + 127.0)) * 6.28)\n           );\n\n    float dist = length(param_pos - closest_center);  \n\n    float s = (dist * dist) \/ (ballrad * ballrad);\n\n    fragColor = mix(\n        mix(\n            mix(v4White, v4Black, 0.0), \n            mix(v4Black, v4White, 0.0), black_or_white), \n        mix(v4White, v4Black, 0.5), \n        smoothstep(ballrad*0.95, ballrad*1.05, dist));\n\n}","name":"","description":"","type":"image"}]}}