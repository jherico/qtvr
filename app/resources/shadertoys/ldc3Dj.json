{"Shader":{"ver":"0.1","info":{"id":"ldc3Dj","date":"1452165091","viewed":287,"name":"maze 3","username":"FabriceNeyret2","description":"ARROWS to go , SPACE to stop","likes":10,"published":3,"flags":48,"tags":["game","maze"],"hasliked":0},"renderpass":[{"inputs":[{"id":257,"src":"\/presets\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"\/\/ inspired from   https:\/\/www.shadertoy.com\/view\/4sSXWR\n\nvoid mainImage( out vec4 O, vec2 U ){\n\n    vec2 R = iResolution.xy;\n    O = texture2D(iChannel0,U\/R);  \/\/ x = path, y = maze\n    \n    O = mix( vec4(1.-O.y), vec4(1,0,0,0), O.x)\n        -.5*smoothstep(.1,.08,4.*length(U\/R.y - vec2(.8,.5)))*sin(20.*iDate.w); \/\/ cursor   \n}\n","name":"","description":"","type":"image"},{"inputs":[{"id":33,"src":"\/presets\/tex00.jpg","ctype":"keyboard","channel":2,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"id":257,"src":"\/presets\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"\/\/ inspired from   https:\/\/www.shadertoy.com\/view\/4sSXWR\n\nfloat t = iGlobalTime;\n#define rnd( x)    fract(1000.*sin(345.2345*x))\n#define id( x,y)   floor(x)+100.*floor(y)\n\nfloat maze(vec2 u) {\n    float n = id(u.x,u.y);  u = fract(u);\n    return 1.-smoothstep(.1,.15,((rnd(n)>.5)?u.x:u.y));  \/\/ .1 .15\n}\n\nfloat keyPress(int ascii) {\n    \/\/if (iResolution.y<2000.) return step(.99,rnd(t+float(ascii)));\n\treturn texture2D(iChannel2,vec2((.5+float(ascii))\/256.,0.25)).x ;\n}\n\nvoid mainImage( out vec4 O, vec2 U )\n{\n    \/\/ --- update state from commands + past\n    vec2 R = iResolution.xy;\n    float  x = texture2D(iChannel0, .5\/R).a, \/\/ state variable : position, direction\n           y = texture2D(iChannel0,1.5\/R).a,\n          dx = texture2D(iChannel0,2.5\/R).a,\n          dy = texture2D(iChannel0,3.5\/R).a,\n          left = keyPress(37)+(iMouse.y==0.?1.:0.), right = keyPress(39), \/\/ keys\n            up = keyPress(38),  down = keyPress(40),\n          stop = keyPress(32),\n           key = left+right+up+down+stop;\n    O.a = texture2D(iChannel0, U\/R).a;    \n\n    if (maze( ( vec2(.8,.5)*R.y + vec2(x,y-15.)+10.*vec2(dx,dy) )* 8.\/R.y ) > 0.) \n             dx=dy=0.; \/\/ collision\n  \n    if (U.x==U.y) {  \/\/ new direction, position\n \t\tif      (U.x==2.5 && key>0.)  O.a = right-left;\n        else if (U.x==3.5 && key>0.)  O.a =    up-down;\n    \telse if (U.x== .5)  O.a = x+dx;\n    \telse if (U.x==1.5)  O.a = y+dy;\n     }\n\n    \/\/ --- draw path and maze\n    vec2 U_ = 1.-step(R-1.,abs(U+U-R));\n    O.x = texture2D(iChannel0, (U+vec2(dx,dy))\/R).x * U_.x*U_.y \/\/ move path\n         + smoothstep(.1,.08,4.*length(U\/R.y - vec2(.8,.5)));   \/\/ + cur pos\n    O.y  =  maze( ( U + vec2(x,y-15.) )* 8.\/R.y );     \n}","name":"","description":"","type":"buffer"}]}}