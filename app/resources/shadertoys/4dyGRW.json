{"Shader":{"ver":"0.1","info":{"id":"4dyGRW","date":"1453360290","viewed":94,"name":"Bouncing Rectangle","username":"jackdavenport","description":"A basic 2D physics simulation using the new framebuffers. Click the mouse to change the square's velocity.","likes":1,"published":3,"flags":32,"tags":["2d","rectangle","bounce","physics","buffer"],"hasliked":0},"renderpass":[{"inputs":[{"id":6,"src":"\/presets\/tex05.jpg","ctype":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"true","srgb":"false","internal":"byte"}},{"id":257,"src":"\/presets\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"\/\/#define SHOW_BUF_A\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv  = fragCoord.xy \/ iResolution.xy;\n    vec2 pos = texture2D(iChannel0, uv).xy;\n    \n    fragColor = texture2D(iChannel1, uv);\n    \n    if(uv.x < pos.x + .05 && uv.y < pos.y + .05 && uv.x > pos.x - .05 && uv.y > pos.y - .05) {\n     \n        fragColor = vec4(1.);\n        \n    }\n    \n    #ifdef SHOW_BUF_A\n    if(uv.x < .1 && uv.y < .1) {\n     \n        fragColor = texture2D(iChannel0, uv \/ .1);\n        \n    }\n    #endif\n}","name":"","description":"","type":"image"},{"inputs":[{"id":257,"src":"\/presets\/previz\/buffer00.png","ctype":"buffer","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"#define SPEED 10.\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec4 tex = texture2D(iChannel0, fragCoord \/ iResolution.xy);\n    if(tex.xy == vec2(0.)) tex = vec4(.5,.5,.2,.1);\n    \n    vec2 pos = tex.xy;\n    vec2 vel = tex.zw;\n    \n    if(pos.x <= 0.) vel = reflect(vel, vec2(1.,0. ));\n    if(pos.y <= 0.) vel = reflect(vel, vec2(0.,1. ));\n    if(pos.x >= 1.) vel = reflect(vel, vec2(-1.,0.));\n    if(pos.y >= 1.) vel = reflect(vel, vec2(0.,-1.));\n    \n    pos -= vel * SPEED * iTimeDelta;\n    \n   \tif(iMouse.z > 0.) {\n     \n        vel = vec2(.5) + ((iMouse.xy \/ iResolution.xy) * 2. - 1.);\n        pos = vec2(.5) + (vel * .05);\n        \n        vel = normalize(vel);\n        \n    }\n    \n    fragColor = vec4(pos,vel);\n}","name":"","description":"","type":"buffer"}]}}