{"Shader":{"ver":"0.1","info":{"id":"4dfXWj","date":"1406756959","viewed":4167,"name":"Music - Mario","username":"iq","description":"Testing sequencing music","likes":24,"published":3,"flags":8,"tags":["2d","sound","music","sequencing"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ Created by inigo quilez - iq\/2014\n\/\/ License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n#define _ 0.\n#define R 3.\n#define G 1.\n#define Y 2.\n\n#define DD(id,a,b,c,d,e,f,g,h,i,j,k,l) if(y==id)m=(a+4.*(b+4.*(c+4.*(d+4.*(e+4.*(f+4.*(g+4.*(h+4.*(i+4.*(j+4.*(k+4.*(l))))))))))));\n\nvec3 mario( in vec3 col, in vec2 p ) \n{\n\tfloat x =      floor( p.x*10.0+5.0 );\n\tint   y = int( floor( p.y*10.0+7.0 ));\n\n\tfloat m = 0.0;\n\t\n\tDD(14, _,_,_,R,R,R,R,R,_,_,_,_)\n\tDD(13, _,_,R,R,R,R,R,R,R,R,R,_)\n\tDD(12, _,_,G,G,G,Y,Y,G,Y,_,_,_)\n\tDD(11, _,G,Y,G,Y,Y,Y,G,Y,Y,Y,_)\n\tDD(10, _,G,Y,G,G,Y,Y,Y,G,Y,Y,Y)\n\tDD( 9, _,G,G,Y,Y,Y,Y,Y,G,G,G,_)\n\tDD( 8, _,_,_,Y,Y,Y,Y,Y,Y,Y,_,_)\n\tDD( 7, _,_,G,G,R,G,G,G,_,_,_,_)\n\tDD( 6, _,G,G,G,R,G,G,R,G,G,_,_)\n\tDD( 5, G,G,G,G,R,R,R,R,G,G,G,G)\n\tDD( 4, Y,Y,G,R,Y,R,R,Y,R,Y,Y,Y)\n\tDD( 3, Y,Y,Y,R,R,R,R,R,R,R,Y,Y)\n\tDD( 2, _,_,R,R,R,_,_,R,R,R,_,_)\n\tDD( 1, _,G,G,G,_,_,_,_,G,G,G,_)\n\tDD( 0, G,G,G,G,_,_,_,_,G,G,G,G)\n\n\tfloat c = mod(floor(m\/pow(4.,x)),4.);\n\t\n\tif( c>0.5 ) col = vec3(0.3,0.4,0.1);\n\tif( c>1.5 ) col = vec3(1.0,0.6,0.0);\n\tif( c>2.5 ) col = vec3(1.0,0.0,0.0);\n\t\n\t\/\/ border\n\tfloat f = step(0.5,c); col += 0.3*(dFdx(f) - dFdy(f));\n\t\n\treturn col;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 p = (-iResolution.xy+2.0*fragCoord.xy)\/iResolution.y;\n\n    \/\/ background\t\n\tvec2 q = vec2( atan(p.y,p.x), length(p) );\n\tfloat f = smoothstep( -0.1, 0.1, sin(q.x*10.0 + iGlobalTime) );\n\tvec3 col = mix( vec3(0.42,0.55,1.0), vec3(0.6,0.7,1.0), f );\n\t\n\t\/\/ soft shadow\n\tfloat sha = 0.0;\n\tfor( int j=0; j<5; j++ )\n\tfor(int i=0; i<5; i++ )\n\t{\t\t\n\t\tvec3 s = mario( vec3(0.0), p + 10.0*vec2(float(i)-4.0,float(j)+1.0)\/iResolution.y );\n\t\tsha += step(0.1,s.x);\n    }\t\t\t\n\tsha \/= 25.0;\t\n\tcol *= 1.0-0.4*sha;\n\n\t\/\/ color\n\tcol = mario( col, p);\n\n    \/\/ vigneting\t\n\tcol *= 1.0 - 0.2*length(p);\n\n    \/\/ fade in\/out\t\n\tcol *=       smoothstep(  0.0,  2.0, iGlobalTime );\n    col *= 1.0 - smoothstep( 55.0, 60.0, iGlobalTime );\n \n\t\n\tfragColor = vec4( col, 1.0 );\n}","name":"","description":"","type":"image"},{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ Created by inigo quilez - iq\/2014\n\/\/ License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n\n\/\/----------------------------------------------------------------------------------------\n\nfloat noise( float x )\n{\n    return fract(sin(1371.1*x)*43758.5453);;\n}\n\n\nfloat saw( float x, float a)\n{\n    float f = fract( x );\n\treturn clamp(f\/a,0.0,1.0)-clamp((f-a)\/(1.0-a),0.0,1.0);\n}\n\n\n    \n\/\/----------------------------------------------------------------------------------------\n\n\/\/ main instrument\nfloat instr1( float f, float t )\n{\n    float y  = 0.6*saw(1.0*f*t,0.1)*clamp( 1.2 - 1.0*0.01*f*t, 0.0, 1.0 );\n\t      y += 0.3*saw(2.0*f*t,0.2)*clamp( 1.2 - 2.0*0.01*f*t, 0.0, 1.0 );\n\t      y += 0.1*saw(4.0*f*t,0.4)*clamp( 1.2 - 4.0*0.01*f*t, 0.0, 1.0 );\n          y *= 0.9 + 0.1*cos(60.0*t);\n\treturn y;\t\n}\n\nfloat instr2( float f, float t )\n{\n\treturn instr1(f,t);\n}\n\n\/\/ bass\nfloat instr3( float f, float t )\n{\n\treturn 1.5*cos(0.5*6.2831*f*t)*exp(-0.005*f*t );\n}\n\n\/\/ drum\nfloat instr4( float f, float t )\n{\n\tfloat y  = noise( t );\n\t      y *= exp(-20.0*t );\n\treturn 0.7*y;\n\t\t\n}\n\n\/\/ music data\nfloat doChannel1( float time );\nfloat doChannel2( float time );\nfloat doChannel3( float time );\nfloat doChannel4( float time );\n\n\/\/----------------------------------------------------------------------------------------\n\/\/ sound shader entrypoint\n\/\/\n\/\/ input: time in seconds\n\/\/ ouput: stereo wave valuie at \"time\"\n\/\/----------------------------------------------------------------------------------------\n\nvec2 mainSound( float time )\n{\t\n    vec2 y = vec2(0.0);\n    y += vec2(0.75,0.25)*doChannel1( time ); \/\/ main instrument\n    y += vec2(0.25,0.75)*doChannel2( time ); \/\/ secondary instrument\n    y += vec2(0.25,0.25)*doChannel3( time ); \/\/ bass\n    y += vec2(0.25,0.25)*doChannel4( time ); \/\/ drum\n\t\n    y *= 1.0 - smoothstep( 55.0, 60.0, time ); \/\/ fade out\n\t\n\treturn vec2( y );\n}\n\n\/\/----------------------------------------------------------------------------------------\n\nfloat note2freq( in float x ) {\treturn 440.0*pow( 2.0, (x-69.0)\/12.0 ); }\n\n#define D(u,v) b+=float(u);if(t>b){x=b;n=float(v);}\n#define B(u)   b+=float(u);if(t>b){x=b;}\n#define tint 0.048\n\nfloat doChannel1( float t )\n{\n  float b = 0.0;\n  float n = 0.0;\n  float x = 0.0;\n  t \/= tint;\n  D( 0,76)D( 3,76)D( 6,76)D( 6,72)D( 3,76)D( 6,79)D(24,72)D( 9,67)D( 9,64)D( 9,69)\n  D( 6,71)D( 6,70)D( 3,69)D( 6,67)D( 4,76)D( 4,79)D( 4,81)D( 6,77)D( 3,79)D( 6,76)\n  D( 6,72)D( 3,74)D( 3,71)D( 9,72)D( 9,67)D( 9,64)D( 9,69)D( 6,71)D( 6,70)D( 3,69)\n  D( 6,67)D( 4,76)D( 4,79)D( 4,81)D( 6,77)D( 3,79)D( 6,76)D( 6,72)D( 3,74)D( 3,71)\n  D(15,79)D( 3,78)D( 3,77)D( 3,75)D( 6,76)D( 6,68)D( 3,69)D( 3,72)D( 6,69)D( 3,72)\n  D( 3,74)D( 9,79)D( 3,78)D( 3,77)D( 3,75)D( 6,76)D( 6,84)D( 6,84)D( 3,84)D(18,79)\n  D( 3,78)D( 3,77)D( 3,75)D( 6,76)D( 6,68)D( 3,69)D( 3,72)D( 6,69)D( 3,72)D( 3,74)\n  D( 9,75)D( 9,74)D( 9,72)D(30,79)D( 3,78)D( 3,77)D( 3,75)D( 6,76)D( 6,68)D( 3,69)\n  D( 3,72)D( 6,69)D( 3,72)D( 3,74)D( 9,79)D( 3,78)D( 3,77)D( 3,75)D( 6,76)D( 6,84)\n  D( 6,84)D( 3,84)D(18,79)D( 3,78)D( 3,77)D( 3,75)D( 6,76)D( 6,68)D( 3,69)D( 3,72)\n  D( 6,69)D( 3,72)D( 3,74)D( 9,75)D( 9,74)D( 9,72)D(24,72)D( 3,72)D( 6,72)D( 6,72)\n  D( 3,74)D( 6,76)D( 3,72)D( 6,69)D( 3,67)D(12,72)D( 3,72)D( 6,72)D( 6,72)D( 3,74)\n  D( 3,76)D(27,72)D( 3,72)D( 6,72)D( 6,72)D( 3,74)D( 6,76)D( 3,72)D( 6,69)D( 3,67)\n  D(12,76)D( 3,76)D( 6,76)D( 6,72)D( 3,76)D( 6,79)D(24,72)D( 9,67)D( 9,64)D( 9,69)\n  D( 6,71)D( 6,70)D( 3,69)D( 6,67)D( 4,76)D( 4,79)D( 4,81)D( 6,77)D( 3,79)D( 6,76)\n  D( 6,72)D( 3,74)D( 3,71)D( 9,72)D( 9,67)D( 9,64)D( 9,69)D( 6,71)D( 6,70)D( 3,69)\n  D( 6,67)D( 4,76)D( 4,79)D( 4,81)D( 6,77)D( 3,79)D( 6,76)D( 6,72)D( 3,74)D( 3,71)\n  D( 9,76)D( 3,72)D( 6,67)D( 9,68)D( 6,69)D( 3,77)D( 6,77)D( 3,69)D(12,71)D( 4,81)\n  D( 4,81)D( 4,81)D( 4,79)D( 4,77)D( 4,76)D( 3,72)D( 6,69)D( 3,67)D(12,76)D( 3,72)\n  D( 6,67)D( 9,68)D( 6,69)D( 3,77)D( 6,77)D( 3,69)D(12,71)D( 3,77)D( 6,77)D( 3,77)\n  D( 4,76)D( 4,74)D( 4,72)D(24,76)D( 3,72)D( 6,67)D( 9,68)D( 6,69)D( 3,77)D( 6,77)\n  D( 3,69)D(12,71)\n  return instr1( note2freq( n ), tint*(t-x) );\n}\n\nfloat doChannel2( float t )\n{\n  float b = 0.0;\n  float n = 0.0;\n  float x = 0.0;\n  t \/= tint;\n  D( 0,66)D( 3,66)D( 6,66)D( 6,66)D( 3,66)D( 6,71)D(12,67)D(12,64)D( 9,60)D( 9,55)\n  D( 9,60)D( 6,62)D( 6,61)D( 3,60)D( 6,60)D( 4,67)D( 4,71)D( 4,72)D( 6,69)D( 3,71)\n  D( 6,69)D( 6,64)D( 3,65)D( 3,62)D( 9,64)D( 9,60)D( 9,55)D( 9,60)D( 6,62)D( 6,61)\n  D( 3,60)D( 6,60)D( 4,67)D( 4,71)D( 4,72)D( 6,69)D( 3,71)D( 6,69)D( 6,64)D( 3,65)\n  D( 3,62)D(15,76)D( 3,75)D( 3,74)D( 3,71)D( 6,72)D( 6,64)D( 3,65)D( 3,67)D( 6,60)\n  D( 3,64)D( 3,65)D( 9,76)D( 3,75)D( 3,74)D( 3,71)D( 6,72)D( 6,77)D( 6,77)D( 3,77)\n  D(18,76)D( 3,75)D( 3,74)D( 3,71)D( 6,72)D( 6,64)D( 3,65)D( 3,67)D( 6,60)D( 3,64)\n  D( 3,65)D( 9,68)D( 9,65)D( 9,64)D(30,76)D( 3,75)D( 3,74)D( 3,71)D( 6,72)D( 6,64)\n  D( 3,65)D( 3,67)D( 6,60)D( 3,64)D( 3,65)D( 9,76)D( 3,75)D( 3,74)D( 3,71)D( 6,72)\n  D( 6,77)D( 6,77)D( 3,77)D(18,76)D( 3,75)D( 3,74)D( 3,71)D( 6,72)D( 6,64)D( 3,65)\n  D( 3,67)D( 6,60)D( 3,64)D( 3,65)D( 9,68)D( 9,65)D( 9,64)D(24,68)D( 3,68)D( 6,68)\n  D( 6,68)D( 3,70)D( 6,67)D( 3,64)D( 6,64)D( 3,60)D(12,68)D( 3,68)D( 6,68)D( 6,68)\n  D( 3,70)D( 3,67)D(27,68)D( 3,68)D( 6,68)D( 6,68)D( 3,70)D( 6,67)D( 3,64)D( 6,64)\n  D( 3,60)D(12,66)D( 3,66)D( 6,66)D( 6,66)D( 3,66)D( 6,71)D(12,67)D(12,64)D( 9,60)\n  D( 9,55)D( 9,60)D( 6,62)D( 6,61)D( 3,60)D( 6,60)D( 4,67)D( 4,71)D( 4,72)D( 6,69)\n  D( 3,71)D( 6,69)D( 6,64)D( 3,65)D( 3,62)D( 9,64)D( 9,60)D( 9,55)D( 9,60)D( 6,62)\n  D( 6,61)D( 3,60)D( 6,60)D( 4,67)D( 4,71)D( 4,72)D( 6,69)D( 3,71)D( 6,69)D( 6,64)\n  D( 3,65)D( 3,62)D( 9,72)D( 3,69)D( 6,64)D( 9,64)D( 6,65)D( 3,72)D( 6,72)D( 3,65)\n  D(12,67)D( 4,77)D( 4,77)D( 4,77)D( 4,76)D( 4,74)D( 4,72)D( 3,69)D( 6,65)D( 3,64)\n  D(12,72)D( 3,69)D( 6,64)D( 9,64)D( 6,65)D( 3,72)D( 6,72)D( 3,65)D(12,67)D( 3,74)\n  D( 6,74)D( 3,74)D( 4,72)D( 4,71)D( 4,67)D( 3,64)D( 6,64)D( 3,60)D(12,72)D( 3,69)\n  D( 6,64)D( 9,64)D( 6,65)D( 3,72)D( 6,72)D( 3,65)D(12,67) \n  return instr2( note2freq( n ), tint*(t-x) );\n}\n\nfloat doChannel3( float t )\n{\n  float b = 0.0;\n  float n = 0.0;\n  float x = 0.0;\n  t \/= tint;\n  D( 0,50)D( 3,50)D( 6,50)D( 6,50)D( 3,50)D( 6,67)D(12,55)D(12,55)D( 9,52)D( 9,48)\n  D( 9,53)D( 6,55)D( 6,54)D( 3,53)D( 6,52)D( 4,60)D( 4,64)D( 4,65)D( 6,62)D( 3,64)\n  D( 6,60)D( 6,57)D( 3,59)D( 3,55)D( 9,55)D( 9,52)D( 9,48)D( 9,53)D( 6,55)D( 6,54)\n  D( 3,53)D( 6,52)D( 4,60)D( 4,64)D( 4,65)D( 6,62)D( 3,64)D( 6,60)D( 6,57)D( 3,59)\n  D( 3,55)D( 9,48)D( 9,55)D( 9,60)D( 6,53)D( 9,60)D( 3,60)D( 6,53)D( 6,48)D( 9,52)\n  D( 9,55)D( 3,60)D( 6,79)D( 6,79)D( 3,79)D( 6,55)D( 6,48)D( 9,55)D( 9,60)D( 6,53)\n  D( 9,60)D( 3,60)D( 6,53)D( 6,48)D( 6,56)D( 9,58)D( 9,60)D( 9,55)D( 3,55)D( 6,48)\n  D( 6,48)D( 9,55)D( 9,60)D( 6,53)D( 9,60)D( 3,60)D( 6,53)D( 6,48)D( 9,52)D( 9,55)\n  D( 3,60)D( 6,79)D( 6,79)D( 3,79)D( 6,55)D( 6,48)D( 9,55)D( 9,60)D( 6,53)D( 9,60)\n  D( 3,60)D( 6,53)D( 6,48)D( 6,56)D( 9,58)D( 9,60)D( 9,55)D( 3,55)D( 6,48)D( 6,44)\n  D( 9,51)D( 9,56)D( 6,55)D( 9,48)D( 9,43)D( 6,44)D( 9,51)D( 9,56)D( 6,55)D( 9,48)\n  D( 9,43)D( 6,44)D( 9,51)D( 9,56)D( 6,55)D( 9,48)D( 9,43)D( 6,50)D( 3,50)D( 6,50)\n  D( 6,50)D( 3,50)D( 6,67)D(12,55)D(12,55)D( 9,52)D( 9,48)D( 9,53)D( 6,55)D( 6,54)\n  D( 3,53)D( 6,52)D( 4,60)D( 4,64)D( 4,65)D( 6,62)D( 3,64)D( 6,60)D( 6,57)D( 3,59)\n  D( 3,55)D( 9,55)D( 9,52)D( 9,48)D( 9,53)D( 6,55)D( 6,54)D( 3,53)D( 6,52)D( 4,60)\n  D( 4,64)D( 4,65)D( 6,62)D( 3,64)D( 6,60)D( 6,57)D( 3,59)D( 3,55)D( 9,48)D( 9,54)\n  D( 3,55)D( 6,60)D( 6,53)D( 6,53)D( 6,60)D( 3,60)D( 3,53)D( 6,50)D( 9,53)D( 3,55)\n  D( 6,59)D( 6,55)D( 6,55)D( 6,60)D( 3,60)D( 3,55)D( 6,48)D( 9,54)D( 3,55)D( 6,60)\n  D( 6,53)D( 6,53)D( 6,60)D( 3,60)D( 3,53)D( 6,55)D( 3,55)D( 6,55)D( 3,55)D( 4,57)\n  D( 4,59)D( 4,60)D( 6,55)D( 6,48)D(12,48)D( 9,54)D( 3,55)D( 6,60)D( 6,53)D( 6,53)\n  D( 6,60)D( 3,60)D( 3,53)D( 6,50)\n  return instr3( note2freq( n ), tint*(t-x) );\n}\n\nfloat doChannel4( float t )\n{\n  float b = 0.0;\n  float x = 0.0;\n  t \/= tint;\n  B(0)B(6)B(3)B(6)B(3)B(6)B(9)B(6)B(3)B(3)B(3)B(6)B(4)B(2)B(6)B(4)\n  B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)\n  B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)\n  B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)\n  B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)\n  B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)\n  B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)\n  B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)\n  B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)\n  B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(3)B(6)B(3)B(6)\n  B(9)B(6)B(3)B(3)B(3)B(6)B(3)B(6)B(3)B(6)B(9)B(6)B(3)B(3)B(3)B(6)\n  B(3)B(6)B(3)B(6)B(9)B(6)B(3)B(3)B(3)B(6)B(3)B(6)B(3)B(6)B(9)B(6)\n  B(3)B(3)B(3)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)\n  B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)\n  B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)B(6)B(4)B(2)\n  B(6)B(4)B(2)B(9)B(3)B(6)B(6)B(9)B(3)B(6)B(6)B(9)B(3)B(6)B(6)B(9)\n  B(3)B(6)B(6)B(9)B(3)B(6)B(6)B(9)B(3)B(6)B(6)B(9)B(3)B(6)B(6)B(9)\n  B(3)B(6)B(6)B(9)B(3)B(6)B(6)B(9)B(3)B(6)B(6)\n  return instr4( note2freq( 42.0 ), tint*(t-x) );\n}","name":"","description":"","type":"sound"}]}}