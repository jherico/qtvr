{"Shader":{"ver":"0.1","info":{"id":"XsXGRS","date":"1372545053","viewed":5663,"name":"The Blob","username":"4rknova","description":"Balls are touching.","likes":39,"published":3,"flags":0,"tags":["metaballs"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ by nikos papadopoulos, 4rknova \/ 2013\n\/\/ Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define AA 4.\n\n#define CI vec3(.3,.5,.6)\n#define CO vec3(.2)\n#define CM vec3(.0)\n#define CE vec3(.8,.7,.5)\n\nfloat metaball(vec2 p, float r)\n{\n\treturn r \/ dot(p, p);\n}\n\nvec3 sample(in vec2 uv)\n{\n\tfloat t0 = sin(iGlobalTime * 1.9) * .46;\n\tfloat t1 = sin(iGlobalTime * 2.4) * .49;\n\tfloat t2 = cos(iGlobalTime * 1.4) * .57;\n\n\tfloat r = metaball(uv + vec2(t0, t2), .33) *\n\t\t\t  metaball(uv - vec2(t0, t1), .27) *\n\t\t\t  metaball(uv + vec2(t1, t2), .59);\n\n\tvec3 c = (r > .4 && r < .7)\n\t\t\t  ? (vec3(step(.1, r*r*r)) * CE)\n\t\t\t  : (r < .9 ? (r < .7 ? CO: CM) : CI);\n\n\treturn c;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = (fragCoord.xy \/ iResolution.xy * 2. - 1.)\n\t\t\t* vec2(iResolution.x \/ iResolution.y, 1) * 1.25;\n\n    vec3 col = vec3(0);\n\n#ifdef AA\n    \/\/ Antialiasing via supersampling\n    float e = 1. \/ min(iResolution.y , iResolution.x);    \n    for (float i = -AA; i < AA; ++i) {\n        for (float j = -AA; j < AA; ++j) {\n    \t\tcol += sample(uv + vec2(i, j) * (e\/AA)) \/ (4.*AA*AA);\n        }\n    }\n#else\n    col += sample(uv);\n#endif \/* AA *\/\n    \n    fragColor = vec4(clamp(col, 0., 1.), 1);\n}","name":"","description":"","type":"image"}]}}