{"Shader":{"ver":"0.1","info":{"id":"4dfSWs","date":"1407676143","viewed":960,"name":"Nyplode","username":"movAX13h","description":"GPU friendly but (thus?) fake pixel image explosion. Use the top bar (click and hold) to change blast intensity and the bar at the bottom to go through time. Explosion sound taken from 'sound - acid jam' by srtuss.","likes":9,"published":3,"flags":8,"tags":["2d","mouse","explosion"],"hasliked":0},"renderpass":[{"inputs":[{"id":14,"src":"\/presets\/tex14.png","ctype":"texture","channel":0,"sampler":{"filter":"nearest","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"\/\/ Nyplode, fragment shader by movAX13h, Aug.2014\n\nvec2 rand(vec2 v)\n{\n    return vec2(fract(sin(dot(v.xy ,vec2(12.9898,78.233))) * 43758.5453),\n                fract(cos(dot(v.yx ,vec2(31.6245,22.723))) * 63412.9227)) - 0.5;\n}\n\nvec3 blastBar(float t)\n{\n    return vec3(1.0,\n                smoothstep(0.13,0.66,t),\n                smoothstep(0.66,1.00,t));\n}\n\nvec4 explode(vec2 p, float time, in float blast)\n{\n\tfloat t = clamp(time-2.0, 0.0, 4.0);\n    \n\tp = floor(p \/ 5.0) + vec2(18.0, 16.0);\n\t\n    vec2 r = rand(p);\n\tvec2 delta = 2.0*r * vec2(0.4*(3.0-t), 1.0) - vec2(0.0, t*0.9);\n    \n\tp -= blast*delta*t;\n    \n\tif (clamp(p.x, 0.0, 37.0) != p.x || clamp(p.y, 0.0, 32.0) != p.y) return vec4(0.0);\n\tp.y= 32.0-p.y;\n    \n\treturn smoothstep(0.0, 0.2, time)*smoothstep(2.0, 1.2, t)*texture2D(iChannel0, p\/vec2(256.0, 32.0));\n}\n\n#define dur 5.0\n#define spd 2.0\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float blastBarPos = iResolution.y - 8.0;\n    float timeBarPos = 12.0;\n    \n\tvec2 p = fragCoord.xy - iResolution.xy * 0.5;\n    \n    float blast = 50.0;\n    float t = spd*iGlobalTime + 2.2;\n    \n   \tif (iMouse.z > 0.0)\n    {\n        if (abs(iMouse.y - blastBarPos) < 40.0) \t blast = 20.0 + 200.0*iMouse.x\/iResolution.x;\n        else if (abs(iMouse.y - timeBarPos) < 120.0) t = dur*iMouse.x\/iResolution.x;\n    }\n    \n\tvec4 col = explode(p, mod(t, dur), blast);\n\tcol = mix(col, explode(p, mod(t - 0.05, dur), blast), 0.3);\n\tcol = mix(col, explode(p, mod(t - 0.10, dur), blast), 0.2);\n\tcol = mix(col, explode(p, mod(t - 0.15, dur), blast), 0.1);\n    \n    vec2 uv = fragCoord.xy \/ iResolution.xy;\n\n    \/\/ blast bar\n    col.rgb = mix(col.rgb, blastBar(1.0-uv.x), step(abs(fragCoord.y-blastBarPos), 3.0));\n    col.rgb = mix(col.rgb, vec3(1.0), step(abs(fragCoord.y-blastBarPos), 5.0)*\n                  step(abs(fragCoord.x - (blast-20.0)\/200.0*iResolution.x), 2.0));\n\n    \/\/ cycle time bar\n    col.rgb = mix(col.rgb, vec3(0.8), step(abs(fragCoord.y-timeBarPos), 12.0));\n    float d = length(vec2(iResolution.x*mod(t, dur)\/dur, timeBarPos)-fragCoord.xy)-6.0;\n    col.rgb = mix(col.rgb, vec3(0.1), smoothstep(2.0, 0.0, d));\n    \n\tfragColor = col;\n}","name":"","description":"","type":"image"},{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ by srtuss (https:\/\/www.shadertoy.com\/view\/ldfSW2)\n\nfloat nse(float x)\n{\n\treturn fract(sin(x * 110.082) * 19871.8972);\n}\n\nfloat dist(float s, float d)\n{\n\treturn clamp(s * d, -1.0, 1.0);\n}\n\nfloat quan(float s, float c)\n{\n\treturn floor(s \/ c) * c;\n}\n\nfloat expl(float tb) \n{\n\tfloat aa = 20.0;\n\ttb = sqrt(tb * aa) \/ aa;\n\t\n\tfloat amp = exp(max(tb - 0.15, 0.0) * -10.0);\n\tfloat v = nse(quan(mod(tb, 0.1), 0.0001));\n\tv = dist(v, 4.0) * amp;\n\treturn v;\n}\n\nvec2 mainSound(float time)\n{\n    return 0.3*vec2( expl(mod(time+0.1, 2.5)) );\n}","name":"","description":"","type":"sound"}]}}