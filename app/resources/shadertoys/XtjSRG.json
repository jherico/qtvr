{"Shader":{"ver":"0.1","info":{"id":"XtjSRG","date":"1444599557","viewed":600,"name":"Color channel offset fft","username":"Macint","description":"A simple method to get old video tape effect with missmatched color channels. The effected is matched to the intensity of a frequency interval in the music.","likes":2,"published":3,"flags":64,"tags":["fft","audio","chromaticabberation"],"hasliked":0},"renderpass":[{"inputs":[{"id":29,"src":"\/presets\/vid02.ogv","ctype":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}},{"id":518,"src":"https:\/\/soundcloud.com\/king-koopa\/stbb345-get-jiggy-with-it","ctype":"musicstream","channel":1,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"#define freqStart -1.0\n#define freqInterval 0.1\n#define sampleSize 0.02           \/\/ How accurately to sample spectrum, must be a factor of 1.0\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 xy = fragCoord.xy \/ iResolution.xy;    \n    \n   \t\/\/ first texture row is frequency data\n    \/\/ sample intensities in frequency interval.\n    \n    float intensity = 0.0;\n\tfor(float s = 0.0; s < freqInterval; s += freqInterval * sampleSize) {\n\t\tintensity += texture2D(iChannel1, vec2(freqStart + s, 0.0)).r;\n\t}\n    intensity = abs(intensity);\n    intensity = pow((intensity*sampleSize),3.0)*4.0;\n    \n    \n    \/\/set offsets\n    vec2 rOffset = vec2(-0.02,0)*intensity;\n    vec2 gOffset = vec2(0.0,0)*intensity;\n    vec2 bOffset = vec2(0.04,0)*intensity;\n    \n    vec4 rValue = texture2D(iChannel0, xy - rOffset);\n    vec4 gValue = texture2D(iChannel0, xy - gOffset);\n    vec4 bValue = texture2D(iChannel0, xy - bOffset);\n\n    fragColor = vec4(rValue.r, gValue.g, bValue.b, 1.0);\n}","name":"","description":"","type":"image"}]}}