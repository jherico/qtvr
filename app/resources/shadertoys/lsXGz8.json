{"Shader":{"ver":"0.1","info":{"id":"lsXGz8","date":"1362214766","viewed":2796,"name":"Input - Time","username":"iq","description":"Simple realtime, real time, watch. The background changes with the time of day - dark grey at night, and blue during the day <img src=\"\/img\/emoticonHappy.png\"\/>","likes":30,"published":3,"flags":0,"tags":["2d","time","clock","watch"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ Created by inigo quilez - iq\/2013\n\/\/ License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\nfloat sdSegment( in vec2 p, in vec2 a, in vec2 b )\n{\n\tvec2 pa = p-a, ba = b-a;\n\tfloat h = clamp( dot(pa,ba)\/dot(ba,ba), 0.0, 1.0 );\n\treturn length( pa - ba*h );\n}\n\nvec3 line( in vec3 buf, in vec2 a, in vec2 b, in vec2 p, in vec2 w, in vec4 col )\n{\n   float f = sdSegment( p, a, b );\n   float g = fwidth(f)*w.y;\n   return mix( buf, col.xyz, col.w*(1.0-smoothstep(w.x-g, w.x+g, f)) );\n}\n\nvec3 hash3( float n ) { return fract(sin(vec3(n,n+1.0,n+2.0))*43758.5453123); }\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    \/\/ get time\n    float mils = fract(iDate.w);\n\tfloat secs = mod( floor(iDate.w),        60.0 );\n\tfloat mins = mod( floor(iDate.w\/60.0),   60.0 );\n\tfloat hors = mod( floor(iDate.w\/3600.0), 24.0 );\n    \n    \/\/ enable this for subsecond resolution\n    \/\/secs += mils;\n\n\tvec2 uv = (2.0*fragCoord.xy-iResolution.xy)\/min(iResolution.y,iResolution.x);\n\n\tfloat r = length( uv );\n\tfloat a = atan( uv.y, uv.x )+3.1415926;\n    \n\t\/\/ background color\n\tvec3 nightColor = vec3( 0.2, 0.2, 0.2 ) + 0.1*uv.y;\n\tvec3 dayColor   = vec3( 0.5, 0.6, 0.7 ) + 0.2*uv.y;\n\tvec3 col = mix( nightColor, dayColor, smoothstep( 5.0, 7.0, hors ) - \n\t\t\t\t                          smoothstep(19.0,21.0, hors ) );\n\n    \/\/ inner watch body\t\n\tcol = mix( col, vec3(0.9-0.4*pow(r,4.0)), 1.0-smoothstep(0.94,0.95,r) );\n\n    \/\/ 5 minute marks\t\n\tfloat f = abs(2.0*fract(0.5+a*60.0\/6.2831)-1.0);\n\tfloat g = 1.0-smoothstep( 0.0, 0.1, abs(2.0*fract(0.5+a*12.0\/6.2831)-1.0) );\n\tfloat w = fwidth(f);\n\tf = 1.0 - smoothstep( 0.1*g+0.05-w, 0.1*g+0.05+w, f );\n\tf *= smoothstep( 0.85, 0.86, r+0.05*g ) - smoothstep( 0.94, 0.95, r );\n\tcol = mix( col, vec3(0.0), f );\n\n\t\/\/ seconds hand\n\tvec2 dir;\n\tdir = vec2( sin(6.2831*secs\/60.0), cos(6.2831*secs\/60.0) );\n    col = line( col, vec2(0.0), dir*0.9, uv+0.05, vec2(0.005,4.0), vec4(0.0,0.0,0.0,0.2) );\n    col = line( col, vec2(0.0), dir*0.9, uv,      vec2(0.005,1.0), vec4(0.5,0.0,0.0,1.0) );\n\n\t\/\/ minutes hand\n\tdir = vec2( sin(6.2831*mins\/60.0), cos(6.2831*mins\/60.0) );\n    col = line( col, vec2(0.0), dir*0.7, uv+0.05, vec2(0.015,4.0), vec4(0.0,0.0,0.0,0.2) );\n    col = line( col, vec2(0.0), dir*0.7, uv,      vec2(0.015,1.0), vec4(0.0,0.0,0.0,1.0) );\n\n    \/\/ hours hand\n\tdir = vec2( sin(6.2831*hors\/12.0), cos(6.2831*hors\/12.0) );\n    col = line( col, vec2(0.0), dir*0.4, uv+0.05, vec2(0.015,4.0), vec4(0.0,0.0,0.0,0.2) );\n    col = line( col, vec2(0.0), dir*0.4, uv,      vec2(0.015,1.0), vec4(0.0,0.0,0.0,1.0) );\n\n    \/\/ center mini circle\t\n\tcol = mix( col, vec3(0.5), 1.0-smoothstep(0.050,0.055,r) );\n\tcol = mix( col, vec3(0.0), 1.0-smoothstep(0.005,0.01,abs(r-0.055)) );\n\n    \/\/ border of watch\n\tcol = mix( col, vec3(0.0), 1.0-smoothstep(0.01,0.02,abs(r-0.95)) );\n\n    \/\/ dithering    \n    col += (1.0\/255.0)*hash3(uv.x+13.0*uv.y);\n\n\tfragColor = vec4( col,1.0 );\n}","name":"","description":"","type":"image"}]}}