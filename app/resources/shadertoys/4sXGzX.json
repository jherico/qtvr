{"Shader":{"ver":"0.1","info":{"id":"4sXGzX","date":"1375048911","viewed":1030,"name":"pulsing universe - test","username":"FabriceNeyret2","description":"transformations are done on 3 layers regenerating quickly so the texture does not accumulate stretching.","likes":13,"published":3,"flags":0,"tags":["texture","stars","advection"],"hasliked":0},"renderpass":[{"inputs":[{"id":4,"src":"\/presets\/tex03.jpg","ctype":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"\/\/ advected texture: stationary deformations\n\/\/ Fabrice NEYRET  18\/07\/2013\n\n#define a 1. \/\/ angular velocity\n#define D 6. \/\/ texture regeneration delay\n\n#define Pi 3.1415927\n#define cos01(t) (.5-.5*cos(t))\nfloat time = iGlobalTime+0.3\/.02;\nvec2 FragCoord;\n\nvec3 display_layer(float t)\n{\n\tvec2 uv = (FragCoord.xy \/ iResolution.y-vec2(.9,.5))*2.;\n\n\t\/\/ global fade-in and out of effects.\n\tfloat T = cos01(2.*Pi*.02*time);\n\tfloat phaseT = (mod(.02*time,2.)<1.)? 0. : Pi;\n\t\t\n\t\/\/ weight of this layer: appears and disappear seemlessly\n\tfloat k = cos01(2.*Pi*t\/D);\n\n\t\/\/ radial effect on angular velocity\n\tfloat r = length(uv);\n\t\/\/r = 1.\/r;\n    r = .1+.4*cos01(r);\n\tif (phaseT>0.)\n\t\tr += T*(30.*exp(-400.*r*r)-.4*cos01(r));\n\t\n\t\/\/ zoom effect on angular velocity\n\tfloat z = 1.-T*cos01(phaseT+Pi*t\/D);\n\t\n\t\/\/ transformation of the texture\n    float c = cos(a*t*r), s = sin(a*t*r);\n\tmat2 M = mat2( c, -s, s, c);\n\tuv = z*M*uv;\n\t\n\treturn k*texture2D(iChannel0,uv).rgb;\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec3 col;\n    float t= time;\n\tFragCoord=fragCoord;\n    \n\tt = mod(t,D\/3.);\n\n\tcol  = display_layer(t);\n    col += display_layer(t+D\/3.);\n    col += display_layer(t+2.*D\/3.);\n\t\n\t\n\tfragColor = vec4(col,1.0);\n}","name":"","description":"","type":"image"}]}}