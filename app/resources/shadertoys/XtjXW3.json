{"Shader":{"ver":"0.1","info":{"id":"XtjXW3","date":"1446915113","viewed":393,"name":"Hilbert curve 5","username":"FabriceNeyret2","description":"A variant of https:\/\/www.shadertoy.com\/view\/XljSW3<br\/>Cf https:\/\/www.shadertoy.com\/view\/XljXW3 for its parameterisation.","likes":8,"published":3,"flags":0,"tags":["short","hilbertcurve"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"#define plot(U,l) ( dot(U,l) > 0.  ? abs( dot(U , vec2(-l.y,l.x)) ) : 0. )\n#define plotC(U,l)  abs( length(U-(l)\/2.) - .5 )\n\nvoid mainImage( out vec4 o,  vec2 U )\n{\n    o = vec4(0.0);\n    float s = 1.;  \/\/ mat2 R = mat2(0,-1,-1,0);\n    U \/= iResolution.y; U.x -= .3; U+=1e-5; \/\/ or bug at depth 2. why ?\n    vec2 P = vec2(.5), I=vec2(1,0),J=vec2(0,1), fU, l=-I,r=l, k;\n    \n    for (float i=0.; i<10.; i++) {\n        if (i > mod(iGlobalTime,7.) ) break;\n       \/\/fU = min(U,1.-U); if (min(fU.x,fU.y) < 4.\/H) { o.r++; break; } \/\/ cell border\n\n        fU = step(.5,U);         \/\/ select child\n        bvec2 c = bvec2(fU);     \n        U = 2.*U - fU;           \/\/ go to new local frame\n        l = c.x ? c.y ? -J : -I            \/\/ node left segment\n                : c.y ?  l :  J;\n        r = (c.x==c.y)?  I : c.y ?-J:J;    \/\/ node right segment\n        \/\/ the heart of Hilbert curve : \n        if (c.x) { U.x = 1.-U.x;  l.x=-l.x;  r.x=-r.x;  k=l;l=r;r=k; }      \/\/ sym\n        if (c.y) { U   = 1.-U.yx; l  =-l.yx; r  =-r.yx; }  \/\/ .5+(U-.5)*R   \/\/ rot+sym\n        s++;\n    }\n\n    o += length(l+r) > 0. ?   plotC (U-P, l+r) :  plot (U-P, l) + plot (U-P, r); \n    o = smoothstep(.33+.01*s,.33-.01*s,o);\n    \n    fU = min(U,1.-U);            \/\/ clamp or color\n    o *= min(fU.x,fU.y)<0. ? o-o : vec4(.3,1,.1,1);\n}","name":"","description":"","type":"image"}]}}