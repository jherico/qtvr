{"Shader":{"ver":"0.1","info":{"id":"MlSXWV","date":"1446487972","viewed":189,"name":"[LLCS] #1","username":"XT95","description":"A small live coding session at school (boring course..)","likes":1,"published":3,"flags":0,"tags":["abstract","school","luminy","diezeun"],"hasliked":0},"renderpass":[{"inputs":[{"id":7,"src":"\/presets\/tex06.jpg","ctype":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}},{"id":8,"src":"\/presets\/tex07.jpg","ctype":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"float t = iGlobalTime*.25+10.;\n\nfloat hash(float n) { return fract(sin(n) * 1e4); }\nfloat rand(vec2 n) { \n    return fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);\n}\n\nconst int nbMeta = 30;\nvec3 meta[nbMeta];\nfloat map( in vec2 p)\n{\n    float d = 0.;\n    for(int i=0; i<nbMeta; i++)\n    {\n        d += meta[i].z \/ ( length(p-meta[i].xy));\n    } \n\treturn d;\n}\n\nvec3 normal( in vec2 p )\n{\n \tvec2 eps = vec2(0.1, 0.);\n    vec3 n;\n    n.x = map(p) - map(p+eps.xy);\n    n.y = eps.x*2.;\n    n.z = map(p) - map(p+eps.yx);\n    \n    n = normalize(n);\n    return n;\n}\n\n\nvec3 bckground( in vec2 uv)\n{\n    vec3 c = texture2D(iChannel0, vec2(uv.y\/uv.x,t*.2+uv.y*.05)).rgb;\n \treturn pow( c, vec3(2.2)) + pow( c*1.3, vec3(10.2));  \n}\n\nvec3 bckground2( in vec2 uv)\n{\n    vec3 c = texture2D(iChannel1, vec2(uv.y\/uv.x,t*.2+uv.y*.05)).rgb;\n \treturn pow( c, vec3(2.2)) + pow( c*1.3, vec3(10.2));  \n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 q =  fragCoord.xy \/ iResolution.xy;\n\tvec2 uv = fragCoord.xy \/ iResolution.xy*2.-1.;\n    uv.x *= iResolution.x\/iResolution.y;\n    vec3 col = vec3(0.);\n    \n    \n    for(int i=0; i<nbMeta; i++)\n    {\n     \tmeta[i].x = cos(t*hash(float(i))*2.) * hash(float(i)+.1)*2.;\n     \tmeta[i].y = sin(t*hash(float(i))) * hash(float(i)+.2);\n     \tmeta[i].z = abs( hash(float(i)))*5.+.01;  \n    }\n    \n    \n    float d = map(uv);\n    vec3 n = normal(uv);\n    \n    vec2 p = uv+n.rb;\n    p = mix(uv,p, clamp( pow( q.x*q.y*(1.-q.x)*(1.-q.y)*20., 2.5), 0., 1.));\n    col.r = bckground( p+vec2(.01,0.)).r;\n    col.g = bckground( p+vec2(0.,.01)).g;\n    col.b = bckground( p+vec2(0.,.01)).b;\n    col = pow( col, vec3(1.\/2.2));\n    \n    col = mix(bckground2(uv+vec2(0.,.2)).rgb, col,  clamp( pow( q.x*q.y*(1.-q.x)*(1.-q.y)*30., 2.5), 0., 1.));\n    \/\/\n    \n    col *= .5 + .5*pow( q.x*q.y*(1.-q.x)*(1.-q.y)*50., .5);\n    \n\tfragColor = vec4(col,1.0);\n}\n\n","name":"","description":"","type":"image"}]}}