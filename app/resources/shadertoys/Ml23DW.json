{"Shader":{"ver":"0.1","info":{"id":"Ml23DW","date":"1429286138","viewed":809,"name":"Squirclimation","username":"c0unt0","description":"Even more fun with squircles.","likes":6,"published":3,"flags":0,"tags":["2d","greenscreen","squircle"],"hasliked":0},"renderpass":[{"inputs":[{"id":12,"src":"\/presets\/vid01.webm","ctype":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"#define gridSize 12.0\n#define backgroundColor vec3(0.25,0.25,0.35)\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 q = (fragCoord.xy)\/ iResolution.xy;\n    \n    vec2 uv = (floor(fragCoord.xy\/gridSize)*gridSize)\/ iResolution.xy;\n\tvec3 texColor = texture2D(iChannel0,uv).xyz;\n    float diff = pow(distance(texColor,vec3(0.0,1.0,0.0)),8.0); \n\tdiff = smoothstep(0.0,1.5,diff);\n    texColor = mix(backgroundColor,texColor,diff);\n    \n    float texLum = dot(vec3(0.2126,0.7152,0.0722),texColor);\n    \n    vec3 color = backgroundColor;\n    \n    vec2 ppos = (q - uv)\/(vec2(gridSize)\/iResolution.xy);\n\t\n \tfloat power = texLum*texLum*16.0;\n    float radius = 0.5;\n    float dist = pow(abs(ppos.x-0.5),power) + pow(abs(ppos.y - 0.5),power);\n    \n    if( dist < pow(radius,power))\n    {\n    \tcolor = texColor;\n    }\n    \n    fragColor = vec4(color,1.0); \n}\n","name":"","description":"","type":"image"}]}}