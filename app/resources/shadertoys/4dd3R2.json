{"Shader":{"ver":"0.1","info":{"id":"4dd3R2","date":"1451141618","viewed":95,"name":" Running in the field","username":"DeMaCia","description":"save from GLSL Sandbox as to a souvenir.","likes":3,"published":3,"flags":0,"tags":["terrain","field"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\n#define PI 3.14159265359\n\nvec2 magnify(vec2 p, float x, float y) \n{\n\tif (y < 0.)\n\t\treturn p * (1. + x);\n\telse\n\t\treturn p * (1. - x);\n}\n\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 position = 2. * (( fragCoord.xy \/ iResolution.xy ) - .5);\n\tposition.x *= iResolution.x \/ iResolution.y;\n\t\n\tvec2 pos;\n\tpos.x = position.x \/ abs(position.y);\n\tpos.y = tan(mix(PI\/2., PI\/4., abs(position.y)));\n\t\n\tpos = magnify(pos, .025, position.y);\n\tpos.x += iGlobalTime * 1.;\n    \/\/pos.y += iGlobalTime * 1.;\n\t\n\t\/\/float tile = mod(floor(pos.x*0.333) + floor(pos.y*0.333), 2.);\n\tfloat tile = rand(floor(pos*20.))\n\t\t   \t\t+ rand(floor(pos*40.))\n\t\t   \t\t+ rand(floor(pos*80.))\n\t\t   \t\t+ rand(floor(pos*160.));\n\ttile = max(tile*.5, .01);\n\t\n\tvec3 finalColor = (.7 + .1 * tile) * vec3(.5, 1., .1) * step(position.y, 0.);\n\t\/\/vec3 finalColor = vec3(1.)*tile;\n\t\n    \n\tfloat top = 0.;\n\tfor (float i = 0.; i < 8.; i++) {\n\t\ttop += sin(position.x * 1.25 * pow(2., i)) \/ pow(2., i);\n\t}\n\ttop = pow(abs(top-.25)+.25, 3.333);\n\ttop += pow(.175*abs(top-1.), 8.);\n\ttop *= .05;\n\t\n\tfloat hillZone = step(position.y - top, .1) * step(0., position.y);\n\t\n\t\/\/hill *= .5 + .5 * (pow(abs((position.y - .1) - top), 0.) * rand(position));\n\t\n\tvec3 sky = (1.5- position.y) * vec3(.25, 0.75, 1.);\n\tsky += vec3(2., 1.25, .5) * (.025 \/ distance(position, vec2(1., .75)));\n\tfinalColor += sky * step(0., position.y);\n\t\n\tfinalColor -= hillZone * .125;\n\n\tif (position.y < 0.) \n    {\n\t\tfloat mist = pow(5., -7.\/pos.y);\n\t\tfinalColor = mix(finalColor, sky, mist);\n\t}\n\n\t\/\/finalColor = vec3(pow(5., -7.\/pos.y));\n    \n\t\/\/if (abs(position.y) > .85) finalColor *= .1;\n\t\n\tfragColor = vec4( finalColor, 1. );\n\n}","name":"","description":"","type":"image"}]}}