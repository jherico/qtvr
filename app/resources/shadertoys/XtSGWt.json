{"Shader":{"ver":"0.1","info":{"id":"XtSGWt","date":"1433357918","viewed":671,"name":"Taxi Menger","username":"eiffie","description":"It is new to me - hence play.","likes":2,"published":3,"flags":0,"tags":["menger","manhattan","recursion","taxicab"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/drawing a menger in taxicab space can be done by rotating around\n\/\/the perimeter and recursively rotating around a perimeter 1\/3 the size every\n\/\/8th of a turn similar to how a sierpinski can be drawn with 1\/2 scale and \n\/\/a 3rd of a turn. You can't do both in euclidean space... s'all I'm say'n.\n\nfloat sqrt2=sqrt(2.0);\nfloat tx_cos(float a){return abs(mod(a,4.0*sqrt2)-2.0*sqrt2)\/sqrt2-1.0;}\nfloat tx_sin(float a){return tx_cos(a-sqrt2);}\nvec2 tx_cossin(float a){return vec2(tx_cos(a),tx_sin(a));}\nfloat tx_length(vec2 p){return abs(p.x)+abs(p.y);}\nfloat sn=0.5*sin(iGlobalTime);\nfloat InOrOut(vec2 p){\n\tp.x-=(1.0-sn*2.0)*0.25;\n\tfloat b=1.0,a=0.0;\n\tfor(int n=0;n<32;n++){\n\t\tfloat r=tx_length(p+tx_cossin(a)*b);\n\t\tif(r<b\/(1.5+sn)){\n\t\t\tif(b<0.03)return 0.0; \/\/in menger\n\t\t\tp+=tx_cossin(a)*b;a=0.0;b=b\/(2.5+sn);\n\t\t}else {\n\t\t\tif(a>4.0*sqrt2)return 1.0; \/\/not in the menger\n\t\t\ta+=mix(4.0\/3.0,0.5,0.5+sn)*sqrt2;\n\t\t}\n\t}\n\treturn 0.5;\/\/maybies\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = 3.0*(fragCoord.xy \/ iResolution.xy-0.5);\n\tfragColor = vec4(uv,InOrOut(uv),1.0);\n}","name":"","description":"","type":"image"}]}}