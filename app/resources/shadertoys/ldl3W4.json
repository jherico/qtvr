{"Shader":{"ver":"0.1","info":{"id":"ldl3W4","date":"1370990468","viewed":1260,"name":"Iterations - worms","username":"iq","description":"I played a bit more with noisy iterations and got this","likes":11,"published":3,"flags":0,"tags":["procedural","2d"],"hasliked":0},"renderpass":[{"inputs":[{"id":2,"src":"\/presets\/tex01.jpg","ctype":"texture","channel":0,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"\/\/ Created by inigo quilez - iq\/2013\n\/\/ License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\nfloat hash( float n )\n{\n    return fract(sin(n)*43758.5453);\n}\n\nfloat noise( in vec2 x )\n{\n    vec2 p = floor(x);\n    vec2 f = fract(x);\n    f = f*f*(3.0-2.0*f);\n    float n = p.x + p.y*57.0;\n    return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),\n               mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);\n}\n\nconst mat2 ma = mat2( 1.6, -1.2, 1.2, 1.6 );\n\nvec2 map( vec2 p )\n{\n\tfloat a  = 0.50*noise(p)*6.2831*10.0; p=ma*p;\n\t      a += 0.35*noise(p)*6.2831*10.0; p=ma*p; \n\t      a += 0.15*noise(p)*6.2831*10.0; p=ma*p; \n\ta += 0.15*iGlobalTime;\n\t\n\treturn vec2( cos(a), sin(a) );\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    vec2 p = fragCoord.xy \/ iResolution.xy;\n\tvec2 uv = -1.0 + 2.0*p;\n\tuv.x *= iResolution.x \/ iResolution.y;\n\tvec2 or = uv;\n\t\n\tfloat acc = 0.0;\n\tvec3  col = vec3(0.0);\n\tfor( int i=0; i<64; i++ )\n\t{\n\t\tvec2 dir = map( uv );\n\t\t\n\t\tfloat h = float(i)\/64.0;\n\t\tfloat w = 1.0-h;\n\t\t\n\t\tvec3 ttt = w*mix( 0.4*vec3(0.4,0.55,0.65), vec3(1.0,0.9,0.8), 0.5 + 0.5*dot( dir, -vec2(0.707) ) );\n\t\t\n\t\tcol += w*ttt;\n\t\tacc += w;\n\t\t\n\t\tuv += 0.002*dir;\n\t}\n\tcol \/= acc;\n    \n\tcol = col*texture2D( iChannel0, uv  ).xyz;\n\t\n    \/\/ extra fake lighting\n\tfloat ll = length( uv-or );\n\tvec3 nor = normalize( vec3(dFdx(ll), 4.0\/iResolution.x, dFdy(ll) ) );\n\tcol += vec3(1.0,0.5,0.2)*0.15*dot(nor,normalize(vec3(0.8,0.2,-0.8)) );\n\tcol += 0.1*pow(nor.y,32.0);\n\tcol += vec3(1.0,0.6,0.4)*col*0.2*(1.0-pow(nor.y,8.0));\n\tcol *= 6.0*ll;\n\tcol *= 2.0;\n\t\t\n\tcol *= 0.8 + 0.2*pow( 16.0*p.x*p.y*(1.0-p.x)*(1.0-p.y), 0.25 );\n\t\n\tfragColor = vec4( col, 1.0 );\n}\n","name":"","description":"","type":"image"}]}}