{"Shader":{"ver":"0.1","info":{"id":"4dl3D7","date":"1372235162","viewed":1706,"name":"Colorize","username":"iq","description":"Colorizing a frame from a video","likes":7,"published":3,"flags":0,"tags":["2d"],"hasliked":0},"renderpass":[{"inputs":[{"id":29,"src":"\/presets\/vid02.ogv","ctype":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"true","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"\/\/ Created by inigo quilez - iq\/2013\n\/\/ License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n\/\/ Colorize an old black and white picture.\n\/\/\n\/\/ Stop video at 1.9s, so the chroma matches with the luma\n\n\nfloat brusha( in vec2 p, in vec3 c )\n{\n    float f = exp( -c.z*c.z*dot(p-c.xy,p-c.xy) );\n    return f;\n}\n\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = fragCoord.xy \/ iResolution.xy;\n\n\tvec3 col = vec3(1.0,1.0,1.0);\n\t\n    col = mix( col, vec3(1.0,0.9,0.7), brusha(uv,vec3(0.645,0.75,3.0)) );\n\n\tcol = mix( col, vec3(1.1,0.9,0.7), brusha(uv,vec3(0.645,0.80,15.0)) );\n    col = mix( col, vec3(1.1,0.9,0.7), brusha(uv,vec3(0.645,0.70,15.0)) );\n\n    \/\/ sofa\n\tcol = mix( col, vec3(1.0,0.8,1.0), brusha(uv,vec3(0.7,0.25,15.0)) );\n\tcol = mix( col, vec3(1.0,0.8,1.0), brusha(uv,vec3(0.8,0.25,15.0)) );\n\tcol = mix( col, vec3(1.0,0.8,1.0), brusha(uv,vec3(0.9,0.25,15.0)) );\n\tcol = mix( col, vec3(1.0,0.8,1.0), brusha(uv,vec3(0.8,0.39,15.0)) );\n\tcol = mix( col, vec3(1.0,0.8,1.0), brusha(uv,vec3(0.9,0.37,15.0)) );\n\n\t\/\/ face\n\tcol = mix( col, vec3(0.9,0.78,0.68), brusha(uv,vec3(0.47,0.78,15.0)) );\n    col = mix( col, vec3(0.9,0.78,0.68), brusha(uv,vec3(0.48,0.69,15.0)) );\n    col = mix( col, vec3(0.9,0.78,0.68), brusha(uv,vec3(0.48,0.65,15.0)) );\n\n\t\/\/ lips\n    col = mix( col, vec3(1.0,0.7,0.7), brusha(uv,vec3(0.465,0.66,200.0)) );\n    col = mix( col, vec3(1.0,0.7,0.7), brusha(uv,vec3(0.477,0.66,100.0)) );\n    col = mix( col, vec3(1.0,0.7,0.7), brusha(uv,vec3(0.490,0.66,200.0)) );\n\n\n\t\n\t\/\/ hair\n    col = mix( col, 1.2*vec3(1.0,0.95,0.8), brusha(uv,vec3(0.47,0.85,35.0)) );\n\tcol = mix( col, 1.2*vec3(1.0,0.95,0.8), brusha(uv,vec3(0.51,0.85,35.0)) );\n    col = mix( col, 1.2*vec3(1.0,0.95,0.8), brusha(uv,vec3(0.54,0.80,30.0)) );\n    col = mix( col, 1.2*vec3(1.0,0.95,0.8), brusha(uv,vec3(0.56,0.74,25.0)) );\n    col = mix( col, 1.2*vec3(1.0,0.95,0.8), brusha(uv,vec3(0.56,0.68,25.0)) );\n    col = mix( col, 1.2*vec3(1.0,0.95,0.8), brusha(uv,vec3(0.58,0.62,30.0)) );\n\n    col = mix( col, 1.2*vec3(1.0,0.95,0.8), brusha(uv,vec3(0.44,0.83,40.0)) );\n    col = mix( col, 1.2*vec3(1.0,0.95,0.8), brusha(uv,vec3(0.42,0.78,40.0)) );\n    col = mix( col, 1.2*vec3(1.0,0.95,0.8), brusha(uv,vec3(0.41,0.72,38.0)) );\n    col = mix( col, 1.2*vec3(1.0,0.95,0.8), brusha(uv,vec3(0.42,0.65,38.0)) );\n    col = mix( col, 1.2*vec3(1.0,0.95,0.8), brusha(uv,vec3(0.42,0.60,38.0)) );\n\n\n    \/\/ jersey\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.50,0.30,20.0)) );\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.43,0.30,20.0)) );\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.51,0.35,22.0)) );\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.40,0.35,35.0)) );\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.51,0.40,22.0)) );\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.39,0.40,35.0)) );\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.51,0.45,20.0)) );\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.39,0.45,35.0)) );\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.54,0.50,25.0)) );\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.39,0.50,35.0)) );\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.58,0.54,35.0)) );\n\tcol = mix( col, vec3(1.0,0.8,0.9), brusha(uv,vec3(0.39,0.54,45.0)) );\n\n\n\t\/\/ table\n\tcol = mix( col, vec3(1.0,0.9,0.8), brusha(uv,vec3(0.12,0.33,10.0)) );\n\tcol = mix( col, vec3(1.0,0.9,0.8), brusha(uv,vec3(0.32,0.23,10.0)) );\n\tcol = mix( col, vec3(1.0,0.9,0.8), brusha(uv,vec3(0.23,0.06,15.0)) );\n\tcol = mix( col, vec3(1.0,0.9,0.8), brusha(uv,vec3(0.70,0.10,6.0)) );\n\tcol = mix( col, vec3(1.0,0.9,0.8), brusha(uv,vec3(0.90,0.10,5.0)) );\n\n\t\n\t\/\/ hand\n\tcol = mix( col, vec3(0.9,0.78,0.68), brusha(uv,vec3(0.57,0.18,25.0)) );\n\n\n\tcol *= 1.2;\n\t\n\tcol = mix( vec3(1.0), col, 1.0-smoothstep(0.4,0.6,abs(iChannelTime[0]-1.9) ) );\n\t\n\t\n\tcol *= texture2D( iChannel0, uv ).xyz;\n\t\n\tfragColor = vec4(col,1.0);\n}","name":"","description":"","type":"image"}]}}