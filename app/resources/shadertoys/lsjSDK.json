{"Shader":{"ver":"0.1","info":{"id":"lsjSDK","date":"1416174126","viewed":367,"name":"Flag: Japan","username":"4rknova","description":"Flag of Japan.","likes":0,"published":3,"flags":0,"tags":["flag","japan"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ by nikos papadopoulos, 4rknova \/ 2014\n\/\/ Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define EPS 0.001\n\n#define SUPERSAMPLING 4.\n#define ANIMATE\n\n\/\/ Flag ####################################################################\n#define FLAG_JP_PROP      3.\/2.\n#define FLAG_JP_COL_WHITE vec3(1)\n#define FLAG_JP_COL_RED   vec3(1, 0, 0)\n#define FLAG_JP_RADIUS    .3\n\nvec3 flag_jp(in vec2 p) {\n    if (p.x > FLAG_JP_PROP || p.x < 0. ||\n        p.y > 1. || p.y <0.) return vec3(0.);\n  \n    vec3 c = FLAG_JP_COL_WHITE;\n\t\n    if (length(p - vec2(FLAG_JP_PROP * .5, .5)) < FLAG_JP_RADIUS)\n        c = FLAG_JP_COL_RED;\n  \t\n\treturn c;\n}\n\/\/ #########################################################################\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n    float ar = iResolution.x\/iResolution.y;\n\tvec2 uv = (fragCoord.xy \/ iResolution.xy) * vec2(ar, 1);\n    \n    float zoom = 1.4;\n    vec2  pos  = vec2(.5,.25);\n    \n    uv = uv * zoom - pos; \/\/ Position the flag\n    vec2 pv = uv;\n\n#ifdef ANIMATE \/\/ Wave animation    \n    vec2 cv = uv;    \n\tpv.y = uv.y + (.3 + cv.x) * pow(sin(cv.x * 6. - iGlobalTime * 6.0), 2.) * .032;\n    pv.x = uv.x + cv.y * cos(cv.x - cv.y * 2. - iGlobalTime * .5) * .05;\n#endif\n    \n    vec3 col = vec3(0);\n\n#ifdef SUPERSAMPLING\n    \/\/ Antialiasing via supersampling\n    float e = 1. \/ min(iResolution.y , iResolution.x) \/ zoom;\n    for (float i = -SUPERSAMPLING; i < SUPERSAMPLING; ++i) {\n        for (float j = -SUPERSAMPLING; j < SUPERSAMPLING; ++j) {\n    \t\tcol += flag_jp(pv + vec2(i, j) * (e\/SUPERSAMPLING)) \n                \/ (4.*SUPERSAMPLING*SUPERSAMPLING);\n        }\n    }\n#else\n     col = flag_jp(pv);\n#endif\n\n    float s = 1.;\n    \n#ifdef ANIMATE\n    s = pow(dot(normalize(vec3(pv - uv, 1)), normalize(vec3(0,25, 4))),.4);\n    #endif\n    \n\tfragColor = vec4(col * s, 1);\n}","name":"","description":"","type":"image"}]}}