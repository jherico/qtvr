{"Shader":{"ver":"0.1","info":{"id":"XsXGDM","date":"1371428993","viewed":404,"name":"Chroma Key Composition","username":"4rknova","description":"Simple chroma key composition.","likes":1,"published":3,"flags":0,"tags":["chroma","key"],"hasliked":0},"renderpass":[{"inputs":[{"id":5,"src":"\/presets\/tex04.jpg","ctype":"texture","channel":1,"sampler":{"filter":"mipmap","wrap":"repeat","vflip":"false","srgb":"false","internal":"byte"}},{"id":36,"src":"\/presets\/vid03.webm","ctype":"video","channel":0,"sampler":{"filter":"linear","wrap":"clamp","vflip":"false","srgb":"false","internal":"byte"}}],"outputs":[{"channel":"0"}],"code":"\/\/ by Nikos Papadopoulos, 4rknova \/ 2013\n\/\/ WTFPL\n\n#define BIAS  4.\n#define LUMIN vec3(.2126, .7152, .0722)\n\nvoid mainImage(out vec4 c, vec2 p)\n{\n\tvec2 uv = p.xy \/ iResolution.xy;\n\t\n\tvec4 fg = texture2D(iChannel0, vec2(1) - uv);\n\tvec4 bg = texture2D(iChannel1, vec2(1) - uv);\n\t\n\tfloat sf = max(fg.r, fg.b);\n\tfloat k = clamp((fg.g - sf) * BIAS, 0., 1.);\n\t\n\tif (fg.g > sf) fg = vec4(dot(LUMIN, fg.xyz));\n\t\n\tc = mix(fg, bg, k);\n}","name":"","description":"","type":"image"}]}}