{"Shader":{"ver":"0.1","info":{"id":"XdlSR7","date":"1398525215","viewed":770,"name":"follow the white rabbit illusion","username":"FabriceNeyret2","description":"inspired from http:\/\/www.moillusions.com\/pulsating-nightmare-optical-illusion\/","likes":3,"published":3,"flags":0,"tags":["illusions"],"hasliked":0},"renderpass":[{"inputs":[],"outputs":[{"channel":"0"}],"code":"\/\/ inspired from http:\/\/www.moillusions.com\/pulsating-nightmare-optical-illusion\/\n\n#define DIR 52.\/2.\n#define CIRCLES 10. \/\/ 15\n#define K (2.*2.*PI)\n#define PEAK 2.\n#define A 1.*PI\/3.\n#define S 8.\n\n#define PI 3.14159265356\nfloat t = iGlobalTime;\nvec4 FragColor;\n\nfloat rnd(float i) { return fract(sin(i*1323.23)*1e5); } \n\t\t\t\t\t\t\t\t  \nvoid rabbit(vec2 uv) {\n\tfloat r;\n\tt = floor(3.*t);\n#if 1\n\tvec2 pos = vec2(1.7,1.)*(2.*vec2(rnd(t),rnd(t-543.34))-1.);\n\tuv = uv-pos;\n\tr = smoothstep(1.,.97,10.*length(uv));\n\tr += smoothstep(1.,.97,10.*4.*length(uv+vec2(.1,.0)));\t\n\tr += smoothstep(1.,.97,10.*1.5*length(uv-vec2(.05,.1)));\t\n\tuv.x *= 6.; \n\tr += smoothstep(1.,.97,10.*length(uv-vec2(.2,.2)));\n\tr += smoothstep(1.,.97,10.*length(uv-vec2(.4,.18)));\n\tr += smoothstep(1.,.97,10.*length(uv-vec2(.2,-.03)));\n\tr += smoothstep(1.,.97,10.*length(uv-vec2(.4,-.03)));\n\tFragColor += vec4(2.*r);\n#else\n\tvec2 uv0 = uv;\n\tfor (float i=0.; i<4.; i++) {\n\t\tvec2 uv = uv0 - vec2(1.2*cos(1.*t+i*PI\/2.),.6*sin(1.*t+i*PI\/2.)); \n\t\tr0 = length(uv), a = atan(uv.y,uv.x); \/\/ to polar\n\t\tuv = r0*vec2(cos(a+2.*t),sin(a+2.*t)) ; \n\t\tr = S*max(abs(uv.x),abs(uv.y)); ;\n\t\tr = smoothstep(1.,.97,r)-smoothstep(1.,.97,r\/.9)+smoothstep(1.,.97,r\/.5);\n\t\tFragColor += vec3(2.*r);\n\t}\n#endif\n}\n\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\n{\n\tvec2 uv = 2.*(fragCoord.xy \/ iResolution.y - vec2(.85,.5));\n\t\n\t\/\/ --- background pattern\n\t\n\tfloat r0 = length(uv), a = atan(uv.y,uv.x); \/\/ to polar\n\t\/\/r -= 2.\/abs(1.+(1.-2.\/PEAK)*sin((DIR)*a))\/CIRCLES; \/\/ in[1.,PEAK]\n\tfloat r = r0 + 2.*r0*PEAK*abs(sin(.5*(DIR)*a))\/CIRCLES; \n\tr = sqrt(r);\n\tr = CIRCLES*2.*PI*r; \n\tfloat dr = .5*fwidth(r);\n\tvec3 col = vec3( (cos(r+dr+0.*A)-cos(r-dr+0.*A))\/(2.*dr), \n\t\t\t\t\t (cos(r+dr+1.*A)-cos(r-dr+1.*A))\/(2.*dr), \n\t\t\t\t\t (cos(r+dr+2.*A)-cos(r-dr+2.*A))\/(2.*dr) );\n\tcol = .3+.7*col;\n\tFragColor = vec4(col,1.0);\n\t\n\t\/\/ --- draw moving shape\n\trabbit(uv);\n    fragColor=FragColor;\n}","name":"","description":"","type":"image"}]}}